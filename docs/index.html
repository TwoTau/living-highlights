<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"/>
    <meta charset="utf-8" />
    <title>Living Highlights</title>
    <meta property="og:title" content="Living Highlights" />
    <meta property="og:type" content="article" />
    <meta property="og:description" content="Living Highlights" />
    <meta property="description" content="Living Highlights" />
    <style>
article{--section-prefix:"§";--equation-prefix:"Equation ";--figure-prefix:"Figure ";--table-prefix:"Table ";--cite-list-start:"[";--cite-list-end:"]";--double-quote-start:"“";--double-quote-end:"”";--single-quote-start:"‘";--single-quote-end:"’";--highlight-color:#ff0;--tiny-size:0.5em;--script-size:0.7em;--smaller-size:0.8em;--small-size:0.9em;--large-size:1.2em;--larger-size:1.4em;--huge-size:1.8em;--inline-math-size:1em;--ref-color:steelblue;--ref-color-light:#c8dae9;--ref-color-hover:#90b4d2;--ref-color-error:maroon;--ref-weight:500;--ref-decoration:none;width:var(--article-width);margin-left:var(--article-margin-left);padding:var(--article-padding);--inline-math-size:1.14em}a{color:var(--ref-color);font-weight:var(--ref-weight);text-decoration:var(--ref-decoration)}a:hover{color:var(--ref-color-hover)}sub,sup{line-height:0}q{quotes:var(--double-quote-start) var(--double-quote-end)}q.single{quotes:var(--single-quote-start) var(--single-quote-end)}blockquote{margin-left:2em}.action{cursor:pointer;text-decoration:underline dashed 1px #444}header h1{font-size:var(--huge-size)}header .author-org{font-style:italic}header .author-org::before{content:" · "}h1{font-size:1.4rem}h2{font-size:1.2rem}h3{font-size:1.1rem}h4,h5,h6{font-size:1rem}h1[data-counter]::before,h2[data-counter]::before,h3[data-counter]::before{content:attr(data-counter) " "}figure.figure>figcaption[data-counter]::before,figure.teaser>figcaption[data-counter]::before{content:var(--figure-prefix) attr(data-counter) ". "}figure.table>figcaption[data-counter]::before{content:var(--table-prefix) attr(data-counter) ". "}table{border-spacing:0;border-collapse:collapse}thead tr{border-bottom:1px solid #ccc}tbody td,thead th{font-size:var(--small-size);padding:1px .33em;text-align:left;font-variant-numeric:tabular-nums}tbody tr{border-bottom:1px solid #eee}ol.references{padding-inline-start:2em}ol.references li{font-size:var(--small-size);margin-bottom:6px}:root{--max-article-width:110ex;--article-padding:32px;--toc-width:300px;--margin-width:400px;--gap-width:100px;--article-width:min(var(--max-article-width), calc(100vw - var(--article-padding) * 2 - var(--gap-width) * 2 - var(--toc-width) - var(--margin-width)));--article-margin-left:max(0px, calc(((100vw + var(--toc-width) - var(--article-width) - var(--gap-width) * 2 - var(--margin-width)) / 2)))}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}h1,h2,h3{padding:0}h1{padding-top:.5em}.title{font-size:24pt;font-weight:700}ol,p,pre,table,ul{margin:0}ol,ul{padding-left:1.5em}section>p{margin-bottom:16px}section>p:last-child{margin-bottom:0}.margin,aside{position:relative;float:right;clear:right;width:var(--margin-width);margin-right:calc(-1 * var(--gap-width) - var(--margin-width));margin-bottom:1em;vertical-align:unset}aside{margin-left:0;margin-top:0}aside>:first-child{margin-top:0}aside>:last-child{margin-bottom:0}.inlinenote-number{line-height:1;padding:1px}.float-left{float:left;margin-right:1em}.float-right{float:right;margin-left:1em}.sticky{position:sticky;top:0;z-index:10}.page{text-align:justify;width:calc(100vw - 2 * var(--article-padding) - 2 * var(--article-margin-left))}figure,pre{max-width:calc(100vw - 2 * var(--article-padding) - 2 * var(--article-margin-left));overflow-x:auto}.full{max-width:100vw}.full-image{width:100%;object-fit:cover;vertical-align:middle}.full figcaption{background:#eee;padding:16px 0}.centered{text-align:center}figure{margin:0;padding:5px 0}aside canvas,aside img,aside svg,figure canvas,figure img,figure svg{object-fit:contain;max-width:100%;height:auto}header{padding-bottom:1em}footer{padding:2em 0}@media (max-width:1600px){:root{--article-width:min(var(--max-article-width), calc(100vw - var(--article-padding) * 2 - var(--gap-width) - var(--margin-width)));--article-margin-left:max(0px, calc(((100vw - var(--article-width) - var(--gap-width) - var(--margin-width)) / 2)))}table-of-contents{display:none}}@media (max-width:1100px){:root{--article-padding:16px}article{width:min(var(--max-article-width),calc(100% - var(--article-padding) * 2))}figure,pre{max-width:calc(100vw - var(--article-padding) * 2)}.page{width:min(var(--max-article-width),100%)}.margin,aside{float:none;margin:0;width:auto}.inline-note-number{cursor:pointer;padding:1px 4px}.inline-note .note::before,.inline-note:not(.open) .note{display:none}}@media print{.sticky{position:relative}}.cite-list::before{content:var(--cite-list-start)}.cite-list::after{content:var(--cite-list-end)}.cite-ref{color:var(--ref-color);font-weight:var(--ref-weight);text-decoration:var(--ref-decoration);cursor:pointer}.cite-ref:hover{color:var(--ref-color-hover)}.cite-ref.unresolved,.cite-ref.unresolved:hover{color:var(--ref-color-error)}.cite-info{display:none;background-color:#fff;z-index:1;position:absolute;transform:translate(calc(-14px + -1.6ex),calc(28px + .4em));width:350px;font-weight:400;font-size:14px;color:#000;filter:drop-shadow(3px 3px 3px rgba(0,0,0,.2));border-radius:0 0 6px 6px;border:solid #000;border-width:4px .1px .1px;cursor:auto}.unresolved .cite-info{text-align:center;padding:4px;width:auto}.cite-head{display:flex;flex-direction:column;background-color:#f5f5f5;padding:4px 8px;line-height:1}.cite-head-title{font-size:1.1em}.cite-head-subtitle{font-weight:400;padding-top:4px}.cite-info-wrapper{display:none;position:absolute;transform:translate(-1.6ex,calc(14px + .4em));border-left:10px solid transparent;border-bottom:14px solid #000;border-right:10px solid transparent}.cite-head:hover{background-image:linear-gradient(40deg,transparent 92%,97%,#4682b4 105%);background-repeat:no-repeat;background-size:100%}.cite-body{padding:4px 8px;border-radius:0 0 6px 6px;border-top:.1px solid #000;line-height:1.3}.cite-body-auth{padding-bottom:4px}.cite-body details>summary{list-style:none;cursor:pointer}.cite-body summary::after{content:'\25BA'}.cite-body details[open] summary::after{content:' \25BC'}.cite-body-desc{min-height:108px;padding-top:4px;border-top:.1px solid #000}.cross-ref{color:var(--ref-color);font-weight:var(--ref-weight);text-decoration:var(--ref-decoration);cursor:pointer}.cross-ref:hover{color:var(--ref-color-hover)}.cross-ref.unresolved,.cross-ref.unresolved:hover{color:var(--ref-color-error)}.cross-ref.sec.full::before{content:var(--section-prefix)}.cross-ref.fig.full::before{content:var(--figure-prefix)}.cross-ref.tbl.full::before{content:var(--table-prefix)}.cross-ref.eqn.full::before{content:var(--equation-prefix)}table-of-contents{position:fixed;top:calc(2 * var(--article-padding));left:calc(var(--article-margin-left) - var(--toc-width));height:calc(100vh - 4 * var(--article-padding));overflow-y:auto}table-of-contents ol{width:fit-content;max-width:var(--toc-width);margin:0;padding-left:0;list-style:none}table-of-contents li{margin:1ex 0;padding-left:16px;border-left:2px solid #212e6d11}table-of-contents li:hover{border-left-width:4px;padding-left:14px}table-of-contents li.active{border-color:#000}table-of-contents li.active-parent>a{color:#000}table-of-contents li.active>a{font-weight:700}table-of-contents a{font-weight:inherit}:not(.katex-display)>.katex{font-size:var(--inline-math-size)!important}.math-aug-window{z-index:99;position:absolute;border-bottom:2px solid #000;transform:translate(-50px,-40px);background:#fff;border-radius:2px;padding:1px 5px;filter:drop-shadow(1px 1px 2px rgba(0, 0, 0, .2))}annotation-thread{--highlight-color:#FAFA44;--border-color:rgba(38, 41, 50, 1.0);--ui-element-color:rgba(217, 214, 205, 1.0);--tray-color:rgba(128, 128, 128, 0.3);--thread-color:rgba(150, 150, 150, 0.6)}.anno-tray{width:420px;height:100vh;background-color:var(--tray-color);backdrop-filter:blur(5px);border-left:1px solid var(--border-color);box-sizing:border-box}.anno-tray,.thread-text{-ms-overflow-style:none;scrollbar-width:none;overflow:auto}.anno-tray::-webkit-scrollbar,.thread-text::-webkit-scrollbar{display:none}.anno-threads{position:absolute;display:flex;align-items:center;justify-content:space-between;flex-direction:column;width:100%;height:auto;top:50px;padding-top:10px}.thread-info{display:flex;flex-direction:row;font-weight:bolder;font-size:larger;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border-color)}.thread-type{width:100px;text-align:right}.thread-text{margin:10px;max-height:100px;font-style:italic}.thread-username{width:200px;text-align:left}.thread-datetime{display:flex;justify-content:right;align-items:right;padding:10px;font-size:x-small}.thread-comment{min-height:20px;margin:10px}.thread{background-color:var(--thread-color);min-height:150px;width:380px;margin:10px;border-radius:5px;overflow:hidden;border:1px solid var(--border-color)}.title{display:flex;height:100%;width:80%;text-align:center;align-items:center;justify-content:center}.top-nav{position:sticky;z-index:1;top:0;background-color:var(--ui-element-color);width:100%;height:50px;display:flex;flex-direction:row;justify-content:space-around;align-items:center;border-bottom:1px solid var(--border-color)}.anno-side-tray{position:absolute;display:flex;top:0;right:420px;width:30px;height:300px;overflow:hidden;background-color:transparent;border-bottom-left-radius:30px;transition:width .6s cubic-bezier(.05, .4, .25, .95),height .6s cubic-bezier(.05, .4, .25, .95);justify-content:right}.anno-color{position:absolute;left:90px;top:104px;height:80px}.anno-button,.anno-color-button{position:absolute;display:flex;justify-content:center;align-items:center;box-sizing:border-box;width:30px;cursor:pointer;background-color:var(--ui-element-color);transition:transform .6s cubic-bezier(.05, .4, .25, .95)}.anno-color-button{height:31px;top:169px;font-weight:bolder;border:1px solid var(--border-color);border-right:none}.anno-button{top:200px;height:100px;color:#000;font-size:1.4em;border-bottom-left-radius:30px;border-left:1px solid var(--border-color);border-bottom:1px solid var(--border-color)}.anno{top:0;z-index:99;right:-420px;position:fixed;transition:transform .9s cubic-bezier(.05, .4, .25, .95)}.annotation-highlight{background:var(--highlight-color);cursor:pointer;transition:filter .1s ease-out}.annotation-highlight:hover,.hovered,.thread:hover{filter:brightness(85%)}.annotation-highlight:hover{padding:2px;margin:0 -2px}.anno-tooltip{display:flex;position:absolute;background-color:#d9d6cd;border:1px solid #262932;border-radius:2px;z-index:2}.tooltip-highlight,.tooltip-remove,.tooltip-tweet{display:flex;align-items:center;justify-content:center;cursor:pointer;width:30px;height:30px;transition:background-color .1s ease-out}.tooltip-tweet{border-right:1px solid #262932}.icon-highlight,.icon-remove,.icon-tweet{width:25px;height:25px}.icon-tweet{background-image:url(assets/twitterbird.svg)}.icon-highlight{background-image:url(assets/highlighter.svg)}.tooltip-highlight:hover,.tooltip-tweet:hover{background-color:rgba(150,150,150,.6)}body{font:16px/1.5 -apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";background:#fff;color:#000}:not(pre)>code,pre{font-family:monospace;font-size:15px}h1,h2,h3,h4,h5,h6{font-weight:600;line-height:1.25em;margin:24px 0 16px}h1,h2{border-bottom:1px solid rgba(0,0,0,.1);padding-bottom:6px;width:fit-content}.katex-display,article p,article>ol,article>table,article>ul{margin:12px 0}td,th{border-bottom:1px solid rgba(0,0,0,.2);transition:.1s ease-out}th,tr:hover td{background:rgba(0,0,0,.1)}figure>figcaption{font-weight:600;font-size:var(--small-size);line-height:1.4em;padding-bottom:1ex}.sticky{background:rgba(255,255,255,.8);backdrop-filter:blur(4px)}.note,aside{font-style:inherit;font-size:var(--small-size)}.note{background:#fff;transition:.1s ease-out}.inline-note:hover .inline-note-number,.inline-note:hover .note{background:var(--ref-color-light)}.inline-note .note::before{font-size:var(--smaller-size)}.normal{font-weight:400}.demi{font-weight:600}.bold,.strong{font-weight:700}.code,.mono{font-family:monospace}.em,.emph,.italic{font-style:italic}.highlight{background-color:var(--highlight-color)}.strike{text-decoration:line-through}.underline{text-decoration:underline}.smallcaps{font-variant:small-caps}.lowercase{text-transform:lowercase}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.left{text-align:left}.right{text-align:right}.center{text-align:center}.justify{text-align:justify}.tiny{font-size:var(--tiny-size)}.scriptsize{font-size:var(--script-size)}.footnotesize,.smaller{font-size:var(--smaller-size)}.small{font-size:var(--small-size)}.large{font-size:var(--large-size)}.larger{font-size:var(--larger-size)}.huge{font-size:var(--huge-size)}.hide,.thread.type-highlight{display:none}#early-adoption+q{border-left:4px solid gray;display:block;padding-left:12px}.sticky:has(#fig2){top:32px}.maug{color:#8a2be2;display:inline-block;cursor:pointer}.maug:hover{background:rgba(103,176,202,.22)}.maug-fxh{color:#00f}.maug-dxh{color:#00008b}.maug-fprimeprimex{color:#8b0000}.maug-alpha{color:#db7093}.maug-beta{color:#663399}.maug-fx{color:#00f}.maug-gx{color:#006400}.maug-fprimex{color:#00008b}.maug-gprimex{color:#556b2f}.maug-wx{color:#8b0000}.maug-h{color:purple}.maug-x{color:red}.maug-r{color:orange}.maug-m,.maug-n{color:sienna}.maug-a{color:#8b0000}.maug-5{color:sienna}:root,[data-theme=default]{--base-background-color:rgba(38, 41, 50, 1.0);--thumb-border-color:rgba(255, 255, 255, 0.7);--color-wheel-control-box-shadow:0px 0px 5px 0px rgba(0, 0, 0, 0.85) inset;--brightness-control-box-shadow:0px 0px 5px 0px rgba(0, 0, 0, 0.5) inset;--input-controls-tab-header-background-color:rgba(41, 45, 53, 1.0);--input-controls-tab-header-font-color:rgba(255, 255, 255, 1.0);--input-controls-tab-background-color:rgba(0, 0, 0, 0.1);--range-input-control-background-color:rgba(55, 61, 71, 0.6);--range-input-control-background-color--focused:rgba(55, 61, 71, 0.5);--range-input-control-font-color:rgba(255, 255, 255, 1.0);--range-input-control-selection-color:rgba(0, 0, 0, 0.5);--range-input-control-progress-color:rgba(37, 43, 48, 1.0);--text-input-control-background-color:rgba(55, 61, 71, 0.6);--text-input-control-background-color--focused:rgba(55, 61, 71, 0.5);--text-input-control-font-color:rgba(255, 255, 255, 1.0);--text-input-control-selection-color:rgba(0, 0, 0, 0.5)}[data-theme=light]{--base-background-color:rgba(217, 214, 205, 1.0);--thumb-border-color:rgba(255, 255, 255, 0.7);--color-wheel-control-box-shadow:0px 0px 5px 0px rgba(0, 0, 0, 0.45) inset;--brightness-control-box-shadow:0px 0px 5px 0px rgba(0, 0, 0, 0.25) inset;--input-controls-tab-header-background-color:rgba(221, 218, 210, 1.0);--input-controls-tab-header-font-color:rgba(35, 35, 35, 1.0);--input-controls-tab-background-color:rgba(122, 122, 122, 0.1);--range-input-control-background-color:rgba(221, 218, 210, 0.6);--range-input-control-background-color--focused:rgba(222, 220, 220, 0.5);--range-input-control-font-color:rgba(35, 35, 35, 1.0);--range-input-control-selection-color:rgba(255, 255, 255, 0.5);--range-input-control-progress-color:rgba(228, 228, 228, 1.0);--text-input-control-background-color:rgba(221, 218, 210, 0.6);--text-input-control-background-color--focused:rgba(222, 220, 220, 0.5);--text-input-control-font-color:rgba(35, 35, 35, 1.0);--text-input-control-selection-color:rgba(255, 255, 255, 0.5)}.color-picker{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:180px;height:auto;min-height:226px;box-sizing:border-box;border-left:1px solid #262932;border-bottom:1px solid #262932;background:var(--base-background-color);border-bottom-left-radius:5px;-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);-moz-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.color-picker-controls{position:relative;width:100%;height:auto;display:flex;flex-direction:column}.color-picker-controls-group{position:relative;display:block;align-items:center;width:auto;padding:10px}.color-picker-wheel-control{position:relative;display:flex;flex-direction:row;height:140px;width:140px;border:none}.color-picker-wheel-control::after{content:'';position:absolute;display:block;top:0;left:0;width:100%;height:100%;border:1px solid var(--base-background-color);border-radius:50%;-webkit-box-shadow:var(--color-wheel-control-box-shadow);-moz-box-shadow:var(--color-wheel-control-box-shadow);box-shadow:var(--color-wheel-control-box-shadow);margin:-1px;pointer-events:none}.color-picker-brightness-control{position:relative;display:flex;flex-direction:row;height:100%;width:8px;border:1px solid transparent;border-radius:3px;margin-right:10px}.color-picker-brightness-control::after{content:'';position:absolute;display:block;top:0;left:0;width:100%;height:100%;border-radius:3px;-webkit-box-shadow:var(--brightness-control-box-shadow);-moz-box-shadow:var(--brightness-control-box-shadow);box-shadow:var(--brightness-control-box-shadow);pointer-events:none}.color-picker-brightness-control-thumb,.color-picker-wheel-control-thumb{position:absolute;display:block;width:10px;height:10px;border:1px solid var(--thumb-border-color);border-radius:50%;-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);-moz-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer;z-index:1}.brightness-canvas,.wheel-canvas{width:100%;height:100%;border-radius:3px}.color-picker-input-controls{position:relative;width:100%;height:100%;display:flex;flex-direction:column;background:var(--input-controls-tab-background-color);border-radius:3px;overflow:hidden}.color-picker-input-controls-tab-headers{position:relative;display:flex;flex-direction:row;width:100%;height:25px;overflow:hidden}.color-picker-input-controls-tab-headers button{position:relative;display:block;width:33.33%;height:100%;background:var(--input-controls-tab-header-background-color);font-size:9px;color:var(--input-controls-tab-header-font-color);border:none;outline:0}.color-picker-input-controls-tab-headers button.selected{background:0 0}.color-picker-input-controls-tabs{position:relative;display:block;width:100%;height:auto;padding:4px}.color-picker-input-controls-tab{position:relative;display:flex;flex-direction:column}.color-picker-input-controls-tab:not(.selected){display:none}input{font-size:100%}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}.range-input-control{position:relative;display:block;width:100%;height:auto;min-height:20px;margin:1px 0 0;background:var(--range-input-control-background-color);font-size:10px;cursor:ew-resize;overflow:hidden}.range-input-control.range-input-control--focused,.range-input-control:hover{background:var(--range-input-control-background-color--focused)}.range-input-control:first-child{border-top-left-radius:3px;border-top-right-radius:3px}.range-input-control:last-child{border-bottom-left-radius:3px;border-bottom-right-radius:3px}.range-input-control .range-input-details-block,.range-input-control .range-input-enter-block{position:absolute;display:block;top:0;left:0;right:0;bottom:0}.range-input-control:not(.range-input-control--key-input-mode) .range-input-enter-block{display:none}.range-input-control.range-input-control--key-input-mode .range-input-enter-block,.range-input-control:not(.range-input-control--key-input-mode) .range-input-details-block{display:block}.range-input-control.range-input-control--key-input-mode .range-input-details-block{display:none}.range-input-control input{position:absolute;display:block;top:50%;transform:translate(0,-50%);width:100%;height:auto;background:0 0;border:none;color:var(--range-input-control-font-color);text-align:center;outline:0}.range-input-control input::-moz-selection{background:var(--range-input-control-selection-color)}.range-input-control input::selection{background:var(--range-input-control-selection-color)}.range-input-control .range-input-progress{position:absolute;display:block;top:0;left:0;height:100%;background:var(--range-input-control-progress-color)}.range-input-control .range-input-label,.range-input-control .range-input-value{position:absolute;display:block;top:50%;width:auto;height:auto;transform:translate(0,-50%);color:var(--range-input-control-font-color);pointer-events:none}.range-input-control .range-input-label{left:5px}.range-input-control .range-input-value{right:5px}.text-input-control{position:relative;display:block;width:100%;height:auto;min-height:20px;background:var(--text-input-control-background-color);font-size:10px;margin:1px 0 0;cursor:text;overflow:hidden}.text-input-control.text-input-control--focused,.text-input-control:hover{background:var(--text-input-control-background-color--focused)}.text-input-control:first-child{border-top-left-radius:3px;border-top-right-radius:3px}.text-input-control:last-child{border-bottom-left-radius:3px;border-bottom-right-radius:3px}.text-input-control .text-input-details-block,.text-input-control .text-input-enter-block{position:absolute;display:block;top:0;left:0;right:0;bottom:0}.text-input-control:not(.text-input-control--focused) .text-input-enter-block{display:none}.text-input-control.text-input-control--focused .text-input-enter-block,.text-input-control:not(.text-input-control--focused) .text-input-details-block{display:block}.text-input-control.text-input-control--focused .text-input-details-block{display:none}.text-input-control input{position:absolute;display:block;top:50%;transform:translate(0,-50%);width:100%;height:auto;background:0 0;color:var(--text-input-control-font-color);text-align:center;border:none;outline:0}.text-input-control input::-moz-selection{background:var(--text-input-control-selection-color)}.text-input-control input::selection{background:var(--text-input-control-selection-color)}.text-input-control .text-input-label,.text-input-control .text-input-value{position:absolute;display:block;top:50%;width:auto;height:auto;transform:translate(0,-50%);color:var(--text-input-control-font-color);pointer-events:none}.text-input-control .text-input-label{left:5px}.text-input-control .text-input-value{right:5px}
    </style>
  </head>
  <body>
    <article><table-of-contents><ol><li>Abstract<ol></ol></li><li><a href="#introduction">Introduction</a><ol><li><a href="#goals">Goals</a><ol></ol></li><li><a href="#related-work">Related work</a><ol></ol></li></ol></li><li><a href="#implementation">Implementation</a><ol><li><a href="#ui">UI</a><ol></ol></li><li><a href="#text-fragments">Text fragments</a><ol></ol></li><li><a href="#tweet-web-intents">Tweet web intents</a><ol></ol></li><li><a href="#living-highlights-server">Living Highlights server</a><ol></ol></li></ol></li><li><a href="#limitations">Limitations</a><ol><li><a href="#early-adoption">(Early) adoption</a><ol></ol></li><li><a href="#day-search-limit">7-day search limit</a><ol></ol></li><li><a href="#equation-highlighting">Equation highlighting</a><ol></ol></li><li><a href="#text-fragment-generation">Text fragment generation</a><ol></ol></li><li><a href="#recent-events-at-twitter">Recent events at Twitter</a><ol></ol></li></ol></li><li>References<ol></ol></li></ol></table-of-contents><header><h1 role="banner">Living Highlights</h1><div class="author"><span class="author-name">Vishal Devireddy</span><span class="author-org">University of Washington</span></div><div class="author"><span class="author-name">Tu Nguyen</span><span class="author-org">University of Washington</span></div></header><p><annotation-thread></annotation-thread></p><h1 nonumber="true">Abstract</h1><p>This project adds reader <q>highlights</q> and social annotations to Living Papers documents. Users can highlight a section of a Living Papers document and comment about it on Twitter. The document will then show all tweets containing the document’s URL (not necessarily made through Living Highlights) and display them as highlights on the page.</p><p>The Living Highlights tool simplifies the process of paper discussion while making comments more discoverable.</p><h1 id="introduction" data-counter="1">Introduction</h1><figure class="figure margin" data-counter="1"><img border="2" src="assets/why-twitter.png"></img><figcaption data-counter="1">Why academics use Twitter. Source: <span class="cite-list"><cite-ref key="doi:10.1038/512126a" index="4"></cite-ref></span>, <a href="https://twitter.com/academicssay/status/501887085918560256">Source (Tweet)</a></figcaption></figure><h2 id="goals" data-counter="1.1">Goals</h2><p>Our goal is to add social annotations to Living Papers documents. Our success criteria are:</p><ul><li>Reader can make persistent highlighted annotations on a Living Papers document.</li><li>Other readers can see attributed annotations as they read.</li><li>Readers can comment on others’ annotations.</li><li>Readers do not need to make an account just to use this tool (use Twitter instead).</li></ul><p>Using Twitter’s API, we find all tweets relating to the current URL and display them as highlights and comments in the margin of the document for other readers.</p><p>The advantage that our approach has over past social annotation frameworks is that it leverages an existing community and a platform they are already comfortable with.</p><p>The benefits to the overall scholarly research community lie in better collaboration. Living Highlights makes existing Twitter comments on articles more visible to readers, which promotes academic discussion, especially between groups that may not already be connected. It also makes it easier to gain feedback on papers. As other social annotation projects in the educational space have shown, Living Highlights will also increase paper engagement.</p><aside><p><q>Who in their right mind is going to log on to the <em>PLoS One</em> site solely to comment on a paper? […] I guarantee that there are more comments on Twitter about a <em>PLoS</em> paper.</q></p><p>— <a href="https://twitter.com/phylogenomics">Jonathan Eisen</a>, academic editor-in-chief of <em>PLoS Biology</em>, in <span class="cite-list"><cite-ref key="doi:10.1038/469286a" index="3"></cite-ref></span></p></aside><h2 id="related-work" data-counter="1.2">Related work</h2><p>The blogging platform Medium successfully uses social annotations called <q>highlights</q> to increase engagement. Readers highlight sections of text that are visible to their followers. These highlights can be further commented on, just like an article.</p><p>There were several past attempts to make platforms for open peer review or open discussion of research papers. Almost of these are now discontinued due to adoption or other issues, such as the Selected Papers Network <span class="cite-list"><cite-ref key="doi:10.3389/fncom.2012.00001" index="2"></cite-ref></span>, Journal Fire, Phygg, Annotatr, and Google Reader. The limitations of these systems are:</p><ul><li><strong>Centralization</strong>: The centralized platform requires the creators to continue hosting comments.</li><li><strong>Non-anonymous</strong>: Commenting is public, discouraging junior researchers.</li><li><strong>Low adoption</strong>: Commenting requires adopting an unfamiliar system. Early adopters get litle benefit.</li></ul><p>Read wear <span class="cite-list"><cite-ref key="doi:10.1145/142750.142751" index="1"></cite-ref></span> is a project related to highlights that shows the sections of text that readers spend the most time on. Similarly, highlights show the sections of text that readers find the most important.</p><p>NB <span class="cite-list"><cite-ref key="doi:10.1145/2207676.2208326" index="5"></cite-ref></span>, a social annotation forum used in classrooms, allows public highlights and discussion threads on PDFs. NB is used to ask/answer questions and tag sections of text with labels.</p><p>Related to the Twitter aspect of this project, LitTweeture enables researchers to semi-anonymously ask questions about a paper.</p><h1 id="implementation" data-counter="2">Implementation</h1><p>The main components of our implementation are the Tooltip UI, Text Fragments, Twitter web intents, and our server that searches Twitter.</p><h2 id="ui" data-counter="2.1">UI</h2><p>User flow: select text -&gt; click option on tooltip pop up -&gt; if the option was tweet, login then tweet</p><p>The text and user information then gets sent to the thread interface on the right side of the article. From here, users can select their preferred highlighter color &amp; brightness, and see previously highlighted/tweeted selections in the article.</p><p>Unfinished: Reply threads</p><p>Complications: Removing specific highlighted text</p><h2 id="text-fragments" data-counter="2.2">Text fragments</h2><p><a href="https://web.dev/text-fragments/">Text fragments</a> are a new feature available in all major browsers except Firefox. Like <code>id</code> hashes, text fragments allow linking to parts of the page. For example, <code>#text-fragments</code> links to this section <cross-ref type="sec" xref="text-fragments" index="2.2"></cross-ref>.</p><p>Text fragments go even deeper by allowing linking to <em>text</em> which may not have an <code>id</code> attribute (or may not even be its own element). To highlight the first part of this sentence, you can use this URL:</p><p><a href="https://vishald.com/living-highlights/#:~:text=Text%20fragments%20go%20even%20deeper">https://vishald.com/living-highlights/#:~:text=Text%20fragments%20go%20even%20deeper</a></p><p>where the <code>#:~:text=Text%20fragments%20go%20even%20deeper</code> defines the section of text to highlight. We use this when generating links in our Tweet web intents so that we can reverse map from tweet back to highlighted text. Since this is a browser feature rather than a Living Paper/Highlights-specific feature, this usage of text fragments will be useful even without the Living Highlights.</p><figure class="figure center" data-counter="2"><img width="70%" border="2" src="assets/text-fragment.png"></img><figcaption data-counter="2">Screenshot of Chrome highlighting the text fragment.</figcaption></figure><h2 id="tweet-web-intents" data-counter="2.3">Tweet web intents</h2><p>A <a href="https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/guides/web-intent">Tweet Web Intent</a> is a URL with prefilled tweet content that makes it easy for users to edit and post a tweet. For example, clicking on this URL:</p><p><a href="https://twitter.com/intent/tweet?text=%22Twitter%20web%20intents%22&amp;url=https%3A%2F%2Fvishald.com%2Fliving-highlights%2F%23%3A~%3Atext%3DText%2520fragments%2520are-%2Ctwitter%2520web%2520intents%2C-todo">https://twitter.com/intent/tweet?text=%22Twitter%20web%20intents%22&amp;url=https%3A%2F%2Fvishald.com%2Fliving-highlights%2F%23%3A~%3Atext%3DText%2520fragments%2520are-%2Ctwitter%2520web%2520intents%2C-todo</a></p><p>will open up this page (assuming you are logged in to Twitter):</p><figure class="figure center" data-counter="3"><img width="60%" border="2" src="assets/web-intent.png"></img><figcaption data-counter="3">Screenshot of opened Twitter Web Intent. (Twitter’s link description is using a cached version of this page, so it’s not correct.)</figcaption></figure><h2 id="living-highlights-server" data-counter="2.4">Living Highlights server</h2><p>This is actually more of a serverless function because it has no state.</p><p>Our server uses the <a href="https://developer.twitter.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets">Twitter search API</a> to return relevant social annotations. Our search endpoint searches for all tweets containing the requested page’s base url, and for each non-retweet, returns its:</p><ul><li>Link</li><li>Author name</li><li>Date</li><li>Text</li><li>Parsed text fragment, if any</li></ul><p>In production, the server would need some state in order to keep track of Tweets older than a week. This is a limitation of the Twitter API: <cross-ref type="sec" xref="day-search-limit" index="3.2"></cross-ref>. Even with state, this server would be extremely simple at less than 100 lines of code. This is both cheap and easy to maintain, minimizing the risk of the tool being shut down due to maintenance cost.</p><h1 id="limitations" data-counter="3">Limitations</h1><h2 id="early-adoption" data-counter="3.1">(Early) adoption</h2><aside><p><q>Systemic reform always faces a bootstrap problem: early adopters gain little benefit (because no one else is participating in the new system yet) and suffer high costs.</q></p><p>— <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3264905/">Christopher Lee</a>, author of the now discontinued Selected-Papers Network</p></aside><p>Early adoption is the biggest problem that all social annotation platforms face.</p><h2 id="day-search-limit" data-counter="3.2">7-day search limit</h2><p>Twitter limits API users to only searching through the past week of Tweets. Unfortunately, this means we cannot <q>backfill</q> related Tweets from before the conception of Living Highlights.</p><h2 id="equation-highlighting" data-counter="3.3">Equation highlighting</h2><p>Currently, highlighting equations sometimes leads to slightly incorrect tweet text. For example, if you highlight part of this equation <tex-math mode="inline" code="F(@x + @h) \approx F(@x) + @hF&#39;(@x)" definitions="[{&quot;replace&quot;:&quot;F(@x + @h)&quot;,&quot;symbol&quot;:&quot;F(@x + @h)&quot;,&quot;id&quot;:&quot;fxh&quot;,&quot;definition&quot;:&quot;The best translated $F(@x)$ to approximate $G(@x)$&quot;},{&quot;replace&quot;:&quot;F&#39;(@x)&quot;,&quot;symbol&quot;:&quot;F&#39;(@x)&quot;,&quot;id&quot;:&quot;fprimex&quot;,&quot;definition&quot;:&quot;Linear approximation of $F(x)$ in the neighborhood of $@x$&quot;},{&quot;replace&quot;:&quot;F(@x)&quot;,&quot;symbol&quot;:&quot;F(@x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(@x)&quot;,&quot;symbol&quot;:&quot;G(@x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;F(x)&quot;,&quot;symbol&quot;:&quot;F(x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(x)&quot;,&quot;symbol&quot;:&quot;G(x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;@h&quot;,&quot;symbol&quot;:&quot;h&quot;,&quot;id&quot;:&quot;h&quot;,&quot;definition&quot;:&quot;disparity vector&quot;},{&quot;replace&quot;:&quot;@x&quot;,&quot;symbol&quot;:&quot;x&quot;,&quot;id&quot;:&quot;x&quot;,&quot;definition&quot;:&quot;position vector in an image&quot;},{&quot;replace&quot;:&quot;@R&quot;,&quot;symbol&quot;:&quot;R&quot;,&quot;id&quot;:&quot;r&quot;,&quot;definition&quot;:&quot;Region of interest&quot;}]"></tex-math> describing <tex-math mode="inline" code="F(@x)" definitions="[{&quot;replace&quot;:&quot;F(@x + @h)&quot;,&quot;symbol&quot;:&quot;F(@x + @h)&quot;,&quot;id&quot;:&quot;fxh&quot;,&quot;definition&quot;:&quot;The best translated $F(@x)$ to approximate $G(@x)$&quot;},{&quot;replace&quot;:&quot;F&#39;(@x)&quot;,&quot;symbol&quot;:&quot;F&#39;(@x)&quot;,&quot;id&quot;:&quot;fprimex&quot;,&quot;definition&quot;:&quot;Linear approximation of $F(x)$ in the neighborhood of $@x$&quot;},{&quot;replace&quot;:&quot;F(@x)&quot;,&quot;symbol&quot;:&quot;F(@x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(@x)&quot;,&quot;symbol&quot;:&quot;G(@x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;F(x)&quot;,&quot;symbol&quot;:&quot;F(x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(x)&quot;,&quot;symbol&quot;:&quot;G(x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;@h&quot;,&quot;symbol&quot;:&quot;h&quot;,&quot;id&quot;:&quot;h&quot;,&quot;definition&quot;:&quot;disparity vector&quot;},{&quot;replace&quot;:&quot;@x&quot;,&quot;symbol&quot;:&quot;x&quot;,&quot;id&quot;:&quot;x&quot;,&quot;definition&quot;:&quot;position vector in an image&quot;},{&quot;replace&quot;:&quot;@R&quot;,&quot;symbol&quot;:&quot;R&quot;,&quot;id&quot;:&quot;r&quot;,&quot;definition&quot;:&quot;Region of interest&quot;}]"></tex-math> and <tex-math mode="inline" code="F&#39;(@x)" definitions="[{&quot;replace&quot;:&quot;F(@x + @h)&quot;,&quot;symbol&quot;:&quot;F(@x + @h)&quot;,&quot;id&quot;:&quot;fxh&quot;,&quot;definition&quot;:&quot;The best translated $F(@x)$ to approximate $G(@x)$&quot;},{&quot;replace&quot;:&quot;F&#39;(@x)&quot;,&quot;symbol&quot;:&quot;F&#39;(@x)&quot;,&quot;id&quot;:&quot;fprimex&quot;,&quot;definition&quot;:&quot;Linear approximation of $F(x)$ in the neighborhood of $@x$&quot;},{&quot;replace&quot;:&quot;F(@x)&quot;,&quot;symbol&quot;:&quot;F(@x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(@x)&quot;,&quot;symbol&quot;:&quot;G(@x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;F(x)&quot;,&quot;symbol&quot;:&quot;F(x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(x)&quot;,&quot;symbol&quot;:&quot;G(x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;@h&quot;,&quot;symbol&quot;:&quot;h&quot;,&quot;id&quot;:&quot;h&quot;,&quot;definition&quot;:&quot;disparity vector&quot;},{&quot;replace&quot;:&quot;@x&quot;,&quot;symbol&quot;:&quot;x&quot;,&quot;id&quot;:&quot;x&quot;,&quot;definition&quot;:&quot;position vector in an image&quot;},{&quot;replace&quot;:&quot;@R&quot;,&quot;symbol&quot;:&quot;R&quot;,&quot;id&quot;:&quot;r&quot;,&quot;definition&quot;:&quot;Region of interest&quot;}]"></tex-math> and open the Tweet intent, you will get a correct result:</p><pre><code>&quot;this equation F(x+h)≈F(x)+hF′(x) describing&quot;</code></pre><p>but highlighting a equation with fractions <tex-math mode="inline" code="L_2 \, \text{norm} = (\sum_{x \varepsilon @R} [ @F(x + @h) - G(@x) ]^2)^{\frac{1}{2}}" definitions="[{&quot;replace&quot;:&quot;F(@x + @h)&quot;,&quot;symbol&quot;:&quot;F(@x + @h)&quot;,&quot;id&quot;:&quot;fxh&quot;,&quot;definition&quot;:&quot;The best translated $F(@x)$ to approximate $G(@x)$&quot;},{&quot;replace&quot;:&quot;F&#39;(@x)&quot;,&quot;symbol&quot;:&quot;F&#39;(@x)&quot;,&quot;id&quot;:&quot;fprimex&quot;,&quot;definition&quot;:&quot;Linear approximation of $F(x)$ in the neighborhood of $@x$&quot;},{&quot;replace&quot;:&quot;F(@x)&quot;,&quot;symbol&quot;:&quot;F(@x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(@x)&quot;,&quot;symbol&quot;:&quot;G(@x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;F(x)&quot;,&quot;symbol&quot;:&quot;F(x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(x)&quot;,&quot;symbol&quot;:&quot;G(x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;@h&quot;,&quot;symbol&quot;:&quot;h&quot;,&quot;id&quot;:&quot;h&quot;,&quot;definition&quot;:&quot;disparity vector&quot;},{&quot;replace&quot;:&quot;@x&quot;,&quot;symbol&quot;:&quot;x&quot;,&quot;id&quot;:&quot;x&quot;,&quot;definition&quot;:&quot;position vector in an image&quot;},{&quot;replace&quot;:&quot;@R&quot;,&quot;symbol&quot;:&quot;R&quot;,&quot;id&quot;:&quot;r&quot;,&quot;definition&quot;:&quot;Region of interest&quot;}]"></tex-math> breaks the <tex-math mode="inline" code="\frac{1}{2}" definitions="[{&quot;replace&quot;:&quot;F(@x + @h)&quot;,&quot;symbol&quot;:&quot;F(@x + @h)&quot;,&quot;id&quot;:&quot;fxh&quot;,&quot;definition&quot;:&quot;The best translated $F(@x)$ to approximate $G(@x)$&quot;},{&quot;replace&quot;:&quot;F&#39;(@x)&quot;,&quot;symbol&quot;:&quot;F&#39;(@x)&quot;,&quot;id&quot;:&quot;fprimex&quot;,&quot;definition&quot;:&quot;Linear approximation of $F(x)$ in the neighborhood of $@x$&quot;},{&quot;replace&quot;:&quot;F(@x)&quot;,&quot;symbol&quot;:&quot;F(@x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(@x)&quot;,&quot;symbol&quot;:&quot;G(@x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;F(x)&quot;,&quot;symbol&quot;:&quot;F(x)&quot;,&quot;id&quot;:&quot;fx&quot;,&quot;definition&quot;:&quot;The first stereo image&quot;},{&quot;replace&quot;:&quot;G(x)&quot;,&quot;symbol&quot;:&quot;G(x)&quot;,&quot;id&quot;:&quot;gx&quot;,&quot;definition&quot;:&quot;The second stereo image&quot;},{&quot;replace&quot;:&quot;@h&quot;,&quot;symbol&quot;:&quot;h&quot;,&quot;id&quot;:&quot;h&quot;,&quot;definition&quot;:&quot;disparity vector&quot;},{&quot;replace&quot;:&quot;@x&quot;,&quot;symbol&quot;:&quot;x&quot;,&quot;id&quot;:&quot;x&quot;,&quot;definition&quot;:&quot;position vector in an image&quot;},{&quot;replace&quot;:&quot;@R&quot;,&quot;symbol&quot;:&quot;R&quot;,&quot;id&quot;:&quot;r&quot;,&quot;definition&quot;:&quot;Region of interest&quot;}]"></tex-math>:</p><pre><code>&quot;equation with fractions L2​norm=(∑xεR​[F(x+h)−G(x)]2)21&quot;</code></pre><p>Possible solutions include serializing the equation or rendering a screenshot. Serializing a LaTeX equation requires converting it into text that is both readable and short (to get under the tweet length limit). Alternatively, we could include a rendered image of the selected text in the tweet. This preserves the structure of the equation, but isn’t ideal for searchability or accessibility.</p><h2 id="text-fragment-generation" data-counter="3.4">Text fragment generation</h2><p>It is not always possible to generate a text fragment that uniquely identifies a selection of text. In these cases, the link in the Tweet only includes the URL of the page.</p><h2 id="recent-events-at-twitter" data-counter="3.5">Recent events at Twitter</h2><p><a href="https://en.wikipedia.org/wiki/Acquisition_of_Twitter_by_Elon_Musk">Recent events</a> have changed Twitter, but it’s not yet clear how that will affect academic Twitter users. Still, the main insights of this project apply to all commonly used social media platforms.</p><h1 nonumber="true">References</h1><ol class="references"><li>Hill, W. C., Hollan, J. D., Wroblewski, D., &amp; McCandless, T. (1992). Edit wear and read wear. Proceedings of the SIGCHI Conference on Human Factors in Computing Systems  - CHI ’92. the SIGCHI conference. https://doi.org/10.1145/142750.142751</li><li>Lee, C. (2012). Open Peer Review by a Selected-Papers Network. Frontiers in Computational Neuroscience, 6. https://doi.org/10.3389/fncom.2012.00001</li><li>Mandavilli, A. (2011). Peer review: Trial by Twitter. Nature, 469(7330), 286–287. https://doi.org/10.1038/469286a</li><li>Van Noorden, R. (2014). Online collaboration: Scientists and the social network. Nature, 512(7513), 126–129. https://doi.org/10.1038/512126a</li><li>Zyto, S., Karger, D., Ackerman, M., &amp; Mahajan, S. (2012, May 5). Successful classroom deployment of a social document annotation system. Proceedings of the SIGCHI Conference on Human Factors in Computing Systems. CHI ’12: CHI Conference on Human Factors in Computing Systems. https://doi.org/10.1145/2207676.2208326</li></ol></article>
    <script type="module">
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const e=window,t=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),i=new WeakMap;class s{constructor(e,t,i){if(this._$cssResult$=!0,i!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const n=this.t;if(t&&void 0===e){const t=void 0!==n&&1===n.length;t&&(e=i.get(n)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&i.set(n,e))}return e}toString(){return this.cssText}}const o=t?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,n))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var r;const a=window,u=a.trustedTypes,l=u?u.emptyScript:"",c=a.reactiveElementPolyfillSupport,d={toAttribute(e,t){switch(t){case Boolean:e=e?l:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},h=(e,t)=>t!==e&&(t==t||e==e),f={attribute:!0,type:String,converter:d,reflect:!1,hasChanged:h};class p extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;null!==(t=this.h)&&void 0!==t||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=f){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const s=this[e];this[t]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||f}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(o(e))}else void 0!==e&&t.push(o(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var n;const i=null!==(n=this.shadowRoot)&&void 0!==n?n:this.attachShadow(this.constructor.shadowRootOptions);return((n,i)=>{t?n.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((t=>{const i=document.createElement("style"),s=e.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=f){var i;const s=this.constructor._$Ep(e,n);if(void 0!==s&&!0===n.reflect){const o=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:d).toAttribute(t,n.type);this._$El=e,null==o?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,s=i._$Ev.get(e);if(void 0!==s&&this._$El!==s){const e=i.getPropertyOptions(s),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:d;this._$El=s,this[s]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||h)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var g;p.finalized=!0,p.elementProperties=new Map,p.elementStyles=[],p.shadowRootOptions={mode:"open"},null==c||c({ReactiveElement:p}),(null!==(r=a.reactiveElementVersions)&&void 0!==r?r:a.reactiveElementVersions=[]).push("1.4.1");const m=window,v=m.trustedTypes,_=v?v.createPolicy("lit-html",{createHTML:e=>e}):void 0,b=`lit$${(Math.random()+"").slice(9)}$`,w="?"+b,E=`<${w}>`,y=document,A=(e="")=>y.createComment(e),S=e=>null===e||"object"!=typeof e&&"function"!=typeof e,D=Array.isArray,x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,C=/-->/g,F=/>/g,T=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),N=/'/g,O=/"/g,k=/^(?:script|style|textarea|title)$/i,$=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),R=Symbol.for("lit-noChange"),L=Symbol.for("lit-nothing"),B=new WeakMap,P=y.createTreeWalker(y,129,null,!1),M=(e,t)=>{const n=e.length-1,i=[];let s,o=2===t?"<svg>":"",r=x;for(let t=0;t<n;t++){const n=e[t];let a,u,l=-1,c=0;for(;c<n.length&&(r.lastIndex=c,u=r.exec(n),null!==u);)c=r.lastIndex,r===x?"!--"===u[1]?r=C:void 0!==u[1]?r=F:void 0!==u[2]?(k.test(u[2])&&(s=RegExp("</"+u[2],"g")),r=T):void 0!==u[3]&&(r=T):r===T?">"===u[0]?(r=null!=s?s:x,l=-1):void 0===u[1]?l=-2:(l=r.lastIndex-u[2].length,a=u[1],r=void 0===u[3]?T:'"'===u[3]?O:N):r===O||r===N?r=T:r===C||r===F?r=x:(r=T,s=void 0);const d=r===T&&e[t+1].startsWith("/>")?" ":"";o+=r===x?n+E:l>=0?(i.push(a),n.slice(0,l)+"$lit$"+n.slice(l)+b+d):n+b+(-2===l?(i.push(void 0),t):d)}const a=o+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==_?_.createHTML(a):a,i]};class I{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let s=0,o=0;const r=e.length-1,a=this.parts,[u,l]=M(e,t);if(this.el=I.createElement(u,n),P.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=P.nextNode())&&a.length<r;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(b)){const n=l[o++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+"$lit$").split(b),t=/([.?@])?(.*)/.exec(n);a.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?X:"?"===t[1]?z:"@"===t[1]?Y:q})}else a.push({type:6,index:s})}for(const t of e)i.removeAttribute(t)}if(k.test(i.tagName)){const e=i.textContent.split(b),t=e.length-1;if(t>0){i.textContent=v?v.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],A()),P.nextNode(),a.push({type:2,index:++s});i.append(e[t],A())}}}else if(8===i.nodeType)if(i.data===w)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=i.data.indexOf(b,e+1));)a.push({type:7,index:s}),e+=b.length-1}s++}}static createElement(e,t){const n=y.createElement("template");return n.innerHTML=e,n}}function H(e,t,n=e,i){var s,o,r,a;if(t===R)return t;let u=void 0!==i?null===(s=n._$Co)||void 0===s?void 0:s[i]:n._$Cl;const l=S(t)?void 0:t._$litDirective$;return(null==u?void 0:u.constructor)!==l&&(null===(o=null==u?void 0:u._$AO)||void 0===o||o.call(u,!1),void 0===l?u=void 0:(u=new l(e),u._$AT(e,n,i)),void 0!==i?(null!==(r=(a=n)._$Co)&&void 0!==r?r:a._$Co=[])[i]=u:n._$Cl=u),void 0!==u&&(t=H(e,u._$AS(e,t.values),u,i)),t}class U{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:i}=this._$AD,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:y).importNode(n,!0);P.currentNode=s;let o=P.nextNode(),r=0,a=0,u=i[0];for(;void 0!==u;){if(r===u.index){let t;2===u.type?t=new j(o,o.nextSibling,this,e):1===u.type?t=new u.ctor(o,u.name,u.strings,this,e):6===u.type&&(t=new V(o,this,e)),this.u.push(t),u=i[++a]}r!==(null==u?void 0:u.index)&&(o=P.nextNode(),r++)}return s}p(e){let t=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class j{constructor(e,t,n,i){var s;this.type=2,this._$AH=L,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cm=null===(s=null==i?void 0:i.isConnected)||void 0===s||s}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=H(this,e,t),S(e)?e===L||null==e||""===e?(this._$AH!==L&&this._$AR(),this._$AH=L):e!==this._$AH&&e!==R&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>D(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==L&&S(this._$AH)?this._$AA.nextSibling.data=e:this.T(y.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:i}=e,s="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=I.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===s)this._$AH.p(n);else{const e=new U(s,this),t=e.v(this.options);e.p(n),this.T(t),this._$AH=e}}_$AC(e){let t=B.get(e.strings);return void 0===t&&B.set(e.strings,t=new I(e)),t}k(e){D(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const s of e)i===t.length?t.push(n=new j(this.O(A()),this.O(A()),this,this.options)):n=t[i],n._$AI(s),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class q{constructor(e,t,n,i,s){this.type=1,this._$AH=L,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=s,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=L}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const s=this.strings;let o=!1;if(void 0===s)e=H(this,e,t,0),o=!S(e)||e!==this._$AH&&e!==R,o&&(this._$AH=e);else{const i=e;let r,a;for(e=s[0],r=0;r<s.length-1;r++)a=H(this,i[n+r],t,r),a===R&&(a=this._$AH[r]),o||(o=!S(a)||a!==this._$AH[r]),a===L?e=L:e!==L&&(e+=(null!=a?a:"")+s[r+1]),this._$AH[r]=a}o&&!i&&this.j(e)}j(e){e===L?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class X extends q{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===L?void 0:e}}const W=v?v.emptyScript:"";class z extends q{constructor(){super(...arguments),this.type=4}j(e){e&&e!==L?this.element.setAttribute(this.name,W):this.element.removeAttribute(this.name)}}class Y extends q{constructor(e,t,n,i,s){super(e,t,n,i,s),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=H(this,e,t,0))&&void 0!==n?n:L)===R)return;const i=this._$AH,s=e===L&&i!==L||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==L&&(i===L||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class V{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){H(this,e)}}const G=m.litHtmlPolyfillSupport;null==G||G(I,j),(null!==(g=m.litHtmlVersions)&&void 0!==g?g:m.litHtmlVersions=[]).push("2.4.0");const Z=(e,t,n)=>{var i,s;const o=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let r=o._$litPart$;if(void 0===r){const e=null!==(s=null==n?void 0:n.renderBefore)&&void 0!==s?s:null;o._$litPart$=r=new j(t.insertBefore(A(),e),e,void 0,null!=n?n:{})}return r._$AI(e),r
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */};var K,J;class Q extends p{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Z(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return R}}Q.finalized=!0,Q._$litElement$=!0,null===(K=globalThis.litElementHydrateSupport)||void 0===K||K.call(globalThis,{LitElement:Q});const ee=globalThis.litElementPolyfillSupport;null==ee||ee({LitElement:Q}),(null!==(J=globalThis.litElementVersions)&&void 0!==J?J:globalThis.litElementVersions=[]).push("3.2.2");class te extends Q{createRenderRoot(){return this}connectedCallback(){this.__initchildnodes||(this.__initchildnodes=!0,this.initialChildNodes(Array.from(this.childNodes)),function(e,t=0){const n=e.childNodes;let i=n.length;for(;i>t;)e.removeChild(n[--i])}(this)),super.connectedCallback()}initialChildNodes(e){this.__children=e}}const ne=new Map,ie=[],se=ie.map,oe=ie.some,re=ie.hasOwnProperty,ae=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,ue=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,le=/(?:\.[^/]*|\/)$/;class ce extends Error{constructor(e){super(e)}}function de(e){const t=ae.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function he(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(t){const n=`${e}${t.name}${t.version?`@${t.version}`:""}/package.json`;let i=ne.get(n);return i||ne.set(n,i=fetch(n).then((e=>{if(!e.ok)throw new ce("unable to load package.json");return e.redirected&&!ne.has(e.url)&&ne.set(e.url,i),e.json()}))),i}return async function(i,s){if(i.startsWith(e)&&(i=i.substring(e.length)),/^(\w+:)|\/\//i.test(i))return i;if(/^[.]{0,2}\//i.test(i))return new URL(i,s??location).href;if(!i.length||/^[\s._]/.test(i)||/\s$/.test(i))throw new ce("illegal name");const o=de(i);if(!o)return`${e}${i}`;if(!o.version&&null!=s&&s.startsWith(e)){const t=await n(de(s.substring(e.length)));o.version=t.dependencies&&t.dependencies[o.name]||t.peerDependencies&&t.peerDependencies[o.name]}if(o.path&&!le.test(o.path)&&(o.path+=".js"),o.path&&o.version&&ue.test(o.version))return`${e}${o.name}@${o.version}/${o.path}`;const r=await n(o);return`${e}${r.name}@${r.version}/${o.path||function(e){for(const n of t){let t=e[n];if("string"==typeof t)return t.startsWith("./")&&(t=t.slice(2)),le.test(t)?t:`${t}.js`}}(r)||"index.js"}`}}ce.prototype.name=ce.name;var fe=pe(he());function pe(e){const t=new Map,n=s(null);function i(e){if("string"!=typeof e)return e;let n=t.get(e);return n||t.set(e,n=new Promise(((t,n)=>{const i=document.createElement("script");i.onload=()=>{try{t(ie.pop()(s(e)))}catch(e){n(new ce("invalid module"))}i.remove()},i.onerror=()=>{n(new ce("unable to load module")),i.remove()},i.async=!0,i.src=e,window.define=_e,document.head.appendChild(i)}))),n}function s(t){return n=>Promise.resolve(e(n,t)).then(i)}function o(e){return arguments.length>1?Promise.all(se.call(arguments,n)).then(ge):n(e)}return o.alias=function(t){return pe(((n,i)=>n in t&&(i=null,"string"!=typeof(n=t[n]))?n:e(n,i)))},o.resolve=e,o}function ge(e){const t={};for(const n of e)for(const e in n)re.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:me(n,e)}):t[e]=n[e]);return t}function me(e,t){return()=>e[t]}function ve(e){return"exports"===(e+="")||"module"===e}function _e(e,t,n){const i=arguments.length;i<2?(n=e,t=[]):i<3&&(n=t,t="string"==typeof e?[]:e),ie.push(oe.call(t,ve)?e=>{const i={},s={exports:i};return Promise.all(se.call(t,(t=>"exports"===(t+="")?i:"module"===t?s:e(t)))).then((e=>(n.apply(null,e),s.exports)))}:e=>Promise.all(se.call(t,e)).then((e=>"function"==typeof n?n.apply(null,e):n)))}_e.amd={};const be=Symbol("dependencies"),we=Symbol("load"),Ee=Promise.resolve(!0),ye=new Map;function Ae(e){let t="undefined"!=typeof HTMLElement&&e instanceof HTMLElement?e.constructor:e;for(;t&&!Object.hasOwn(t,"dependencies");)if(t=Object.getPrototypeOf(t),t&&"HTMLElement"===t.name)return null;return t}function Se(e){const t=Ae(e);if(!t)return Ee;const n=t[be]||(t[be]={});if(n[we])return n[we];const i={main:[],css:[]},s=t.dependencies;return s.forEach((({name:t,version:n,main:s,css:o})=>{const r=function(e,t){return n=>`https://cdn.jsdelivr.net/npm/${e}@${t}/${n}`}(t,n),a=r(s),u=r(o),l=ye.get(a)||fe(a);ye.set(a,l),i.main.push(l),o&&!ye.has(u)&&(ye.set(u,!0),i.css.push(function(e,t=globalThis.document){return new Promise((function(n,i){const s=t.createElement("link");s.rel="stylesheet",s.href=e,s.onerror=i,s.onload=n,t.head.appendChild(s)}))}(u,e.ownerDocument)))})),n[we]=Promise.all(i.main.concat(i.css)).then((e=>{const n=s.reduce(((t,n,i)=>(t[n.name]=e[i],t)),{});!function(e,t){const n=Ae(e);if(n){const e=n[be]||(n[be]={});for(const n in t)e[n]=t[n];e[we]=Ee}}(t,n)}))}class De extends te{getDependency(e){return function(e,t){return Ae(e)?.[be]?.[t]}(this,e)}shouldUpdate(){return!!function(e){const t=Ae(e);return!t||t[be]?.[we]===Ee}(this)||(Se(this).then((()=>{this.requestUpdate()})),!1)}}function xe(e,t,n){const i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","line"),a=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("cx",e.offsetWidth/2),a.setAttribute("cy",s.y-i.y-e.offsetHeight),a.setAttribute("r",2),r.setAttribute("stroke","black"),r.setAttribute("stroke-width","1px"),r.setAttribute("x1",e.offsetWidth/2),r.setAttribute("y1",s.y-i.y-e.offsetHeight),r.setAttribute("x2",i.x-s.x+t.offsetWidth/2),r.setAttribute("y2",n?6:4),o.setAttribute("style",`display:inline-block;position:absolute;\n    transform:translate(-${i.x-s.x+t.offsetWidth-4}px,\n    ${s.y-i.y-t.offsetHeight/2}px);\n    width:${i.x-s.x+t.offsetWidth}px;\n    height:${s.y-i.y-e.offsetHeight+3}px;`),o.appendChild(r),o.appendChild(a),o}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ce=2;class Fe{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Te extends Fe{constructor(e){if(super(e),this.it=L,e.type!==Ce)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===L||null==e)return this._t=void 0,this.it=e;if(e===R)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}Te.directiveName="unsafeHTML",Te.resultType=1;const Ne=(e=>(...t)=>({_$litDirective$:e,values:t}))(Te);function Oe(e){let t=[...e.querySelectorAll(".sticky")].map((t=>({sticky:t,inMargin:t.classList.contains("margin"),end:e.querySelector(t.getAttribute("sticky-through"))||e.querySelector(t.getAttribute("sticky-until")),untilBottom:null!=t.getAttribute("sticky-through")})));for(const{sticky:e}of t.filter((({end:e})=>!e)))console.log(e,"Could not find sticky anchor "+(e.getAttribute("sticky-through")||e.getAttribute("sticky-until"))),e.classList.remove("sticky");t=t.filter((({end:e})=>e));const n=[],i=[];for(const e of document.querySelectorAll("table-of-contents a")){const t=document.getElementById(e.hash.slice(1));if(t){const s=[e.parentNode];let o;do{if(o=s[s.length-1].parentNode.closest("li"),!o)break;s.push(o)}while(o);e.parents=s,n.push(e),i.push(t)}else e.outerHTML=e.innerHTML}i.reverse();let s=-1,o=null;window.addEventListener("scroll",(()=>{!function(){let e=[];const n=!window.matchMedia("(max-width: 1100px)").matches;for(const{sticky:i,inMargin:s,end:o,untilBottom:r}of t){if(!o)continue;const t=i.getBoundingClientRect(),a=t.top+window.scrollY-+i.style.transform.slice("translateY(".length,-"px)".length);let u=o.offsetTop;r&&(u+=o.offsetHeight);let l=u-(a+t.height);l=Math.min(0,l);let c=a+l,d=c+t.height;for(const[o,r,h]of e){if(n&&s!=h||d<=o||c>=r)continue;let e=Math.max(0,r+t.height-u);l=r-a-e,c=r-e,d=c+t.height,i.style.setProperty("z-index",1)}e.push([c,d,s]),i.style.setProperty("transform",`translateY(${l}px)`)}}(),function(){const e=i.length-i.findIndex((e=>window.scrollY>=e.offsetTop-10))-1;if(e!==s){if(o){o.classList.remove("active");for(const e of document.querySelectorAll(".active-parent"))e.classList.remove("active-parent")}if(s=e,n[e]){o=n[e].parentElement,o.classList.add("active");for(const t of n[e].parents)t.classList.add("active-parent")}}}()}),{passive:!0})}const{getPrototypeOf:ke,getOwnPropertyDescriptors:$e}=Object;ke({});var Re={},Le={};function Be(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Pe(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function Me(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ie(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),s=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Me(-t,6):t>9999?"+"+Me(t,6):Me(t,4))+"-"+Me(e.getUTCMonth()+1,2)+"-"+Me(e.getUTCDate(),2)+(o?"T"+Me(n,2)+":"+Me(i,2)+":"+Me(s,2)+"."+Me(o,3)+"Z":s?"T"+Me(n,2)+":"+Me(i,2)+":"+Me(s,2)+"Z":i||n?"T"+Me(n,2)+":"+Me(i,2)+"Z":"")}function He(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,s=[],o=e.length,r=0,a=0,u=o<=0,l=!1;function c(){if(u)return Le;if(l)return l=!1,Re;var t,i,s=r;if(34===e.charCodeAt(s)){for(;r++<o&&34!==e.charCodeAt(r)||34===e.charCodeAt(++r););return(t=r)>=o?u=!0:10===(i=e.charCodeAt(r++))?l=!0:13===i&&(l=!0,10===e.charCodeAt(r)&&++r),e.slice(s+1,t-1).replace(/""/g,'"')}for(;r<o;){if(10===(i=e.charCodeAt(t=r++)))l=!0;else if(13===i)l=!0,10===e.charCodeAt(r)&&++r;else if(i!==n)continue;return e.slice(s,t)}return u=!0,e.slice(s,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(i=c())!==Le;){for(var d=[];i!==Re&&i!==Le;)d.push(i),i=c();t&&null==(d=t(d,a++))||s.push(d)}return s}function s(t,n){return t.map((function(t){return n.map((function(e){return r(t[e])})).join(e)}))}function o(t){return t.map(r).join(e)}function r(e){return null==e?"":e instanceof Date?Ie(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,s,o=i(e,(function(e,i){if(n)return n(e,i-1);s=e,n=t?function(e,t){var n=Be(e);return function(i,s){return t(n(i),s,e)}}(e,t):Be(e)}));return o.columns=s||[],o},parseRows:i,format:function(t,n){return null==n&&(n=Pe(t)),[n.map(r).join(e)].concat(s(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Pe(e)),s(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:r}}var Ue=He(","),je=Ue.parse,qe=Ue.parseRows,Xe=He("\t"),We=Xe.parse,ze=Xe.parseRows;function Ye(e){for(var t in e){var n,i,s=e[t].trim();if(s)if("true"===s)s=!0;else if("false"===s)s=!1;else if("NaN"===s)s=NaN;else if(isNaN(n=+s)){if(!(i=s.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ve&&i[4]&&!i[7]&&(s=s.replace(/-/g,"/").replace(/T/," ")),s=new Date(s)}else s=n;else s=null;e[t]=s}return e}const Ve=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ge(e,t,n){return{resolve:(i=n)=>`${e}@${t}/${i}`}}const Ze=Ge("d3","7.6.1","dist/d3.min.js"),Ke=Ge("@observablehq/inputs","0.10.4","dist/inputs.min.js"),Je=Ge("@observablehq/plot","0.6.0","dist/plot.umd.min.js"),Qe=Ge("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),et=Ge("@observablehq/highlight.js","2.0.0","highlight.min.js"),tt=Ge("@observablehq/katex","0.11.1","dist/katex.min.js"),nt=Ge("lodash","4.17.21","lodash.min.js"),it=Ge("htl","0.3.1","dist/htl.min.js"),st=Ge("jszip","3.10.0","dist/jszip.min.js"),ot=Ge("marked","0.3.12","marked.min.js"),rt=Ge("sql.js","1.7.0","dist/sql-wasm.js"),at=Ge("vega","5.22.1","build/vega.min.js"),ut=Ge("vega-lite","5.5.0","build/vega-lite.min.js"),lt=Ge("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),ct=Ge("apache-arrow","4.0.1","Arrow.es2015.min.js"),dt=Ge("arquero","4.8.8","dist/arquero.min.js"),ht=Ge("topojson-client","3.1.0","dist/topojson-client.min.js"),ft=Ge("exceljs","4.3.0","dist/exceljs.min.js"),pt=Ge("mermaid","9.1.6","dist/mermaid.min.js"),gt=Ge("leaflet","1.8.0","dist/leaflet.js");let mt=fe;async function vt(e){const[t,n]=await Promise.all([e(rt.resolve()),e.resolve(rt.resolve("dist/"))]);return t({locateFile:e=>`${n}${e}`})}class _t{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[t,n]=await Promise.all([vt(mt),Promise.resolve(e).then(wt)]);return new _t(new t.Database(n))}async query(e,t){return await async function(e,t,n){const[i]=await e.exec(t,n);if(!i)return[];const{columns:s,values:o}=i,r=o.map((e=>Object.fromEntries(e.map(((e,t)=>[s[t],e])))));return r.columns=s,r}(this._db,e,t)}async queryRow(e,t){return(await this.query(e,t))[0]||null}async explain(e,t){return Et("pre",{className:"observablehq--inspect"},[yt((await this.query(`EXPLAIN QUERY PLAN ${e}`,t)).map((e=>e.detail)).join("\n"))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${null==e?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%'`,null==e?[]:[e])}async describeColumns({schema:e,table:t}={}){if(null==t)throw new Error("missing table");const n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${null==e?"":", ?"}) ORDER BY cid`,null==e?[t]:[t,e]);if(!n.length)throw new Error(`table not found: ${t}`);return n.map((({name:e,type:t,notnull:n})=>({name:e,type:bt(t),databaseType:t,nullable:!n})))}async describe(e){const t=await(void 0===e?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!t.length)throw new Error("Not found");const{columns:n}=t;return Et("table",{value:t},[Et("thead",[Et("tr",n.map((e=>Et("th",[yt(e)]))))]),Et("tbody",t.map((e=>Et("tr",n.map((t=>Et("td",[yt(e[t])])))))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...t){return[e.join("?"),t]}}function bt(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":case"DATE":case"DATETIME":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function wt(e){return"string"==typeof e?fetch(e).then(wt):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(wt):e instanceof ArrayBuffer?new Uint8Array(e):e}function Et(e,t,n){2===arguments.length&&(n=t,t=void 0);const i=document.createElement(e);if(void 0!==t)for(const e in t)i[e]=t[e];if(void 0!==n)for(const e of n)i.appendChild(e);return i}function yt(e){return document.createTextNode(e)}Object.defineProperty(_t.prototype,"dialect",{value:"sqlite"});class At{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map((e=>e.name)),enumerable:!0}})}sheet(e,t){const n="number"==typeof e?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(null==n)throw new Error(`Sheet not found: ${e}`);return function(e,{range:t,headers:n}={}){let[[i,s],[o,r]]=function(e=":",{columnCount:t,rowCount:n}){if(!(e+="").match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[i=0,s=0],[o=t-1,r=n-1]]=e.split(":").map(Ct);return[[i,s],[o,r]]}(t,e);const a=n?e._rows[s++]:null;let u=new Set(["#"]);for(let e=i;e<=o;e++){const t=a?St(a.findCell(e+1)):null;let n=t&&t+""||xt(e);for(;u.has(n);)n+="_";u.add(n)}u=new Array(i).concat(Array.from(u));const l=new Array(r-s+1);for(let t=s;t<=r;t++){const n=l[t-s]=Object.create(null,{"#":{value:t+1}}),r=e.getRow(t+1);if(r.hasValues)for(let e=i;e<=o;e++){const t=St(r.findCell(e+1));null!=t&&(n[u[e+1]]=t)}}return l.columns=u.filter((()=>!0)),l}(this._.getWorksheet(n),t)}}function St(e){if(!e)return;const{value:t}=e;if(t&&"object"==typeof t&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return Dt(t);if(t.text){let{text:e}=t;return e.richText&&(e=Dt(e)),t.hyperlink&&t.hyperlink!==e?`${t.hyperlink} ${e}`:e}return t}return t}function Dt(e){return e.richText.map((e=>e.text)).join("")}function xt(e){let t="";e++;do{t=String.fromCharCode(64+(e%26||26))+t}while(e=Math.floor((e-1)/26));return t}function Ct(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let i=0;if(t)for(let e=0;e<t.length;e++)i+=Math.pow(26,t.length-e-1)*(t.charCodeAt(e)-64);return[i?i-1:void 0,n?+n-1:void 0]}async function Ft(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}async function Tt(e,t,{array:n=!1,typed:i=!1}={}){const s=await e.text();return("\t"===t?n?ze:We:n?qe:je)(s,i&&Ye)}class Nt{constructor(e,t){Object.defineProperty(this,"name",{value:e,enumerable:!0}),void 0!==t&&Object.defineProperty(this,"mimeType",{value:t+"",enumerable:!0})}async blob(){return(await Ft(this)).blob()}async arrayBuffer(){return(await Ft(this)).arrayBuffer()}async text(){return(await Ft(this)).text()}async json(){return(await Ft(this)).json()}async stream(){return(await Ft(this)).body}async csv(e){return Tt(this,",",e)}async tsv(e){return Tt(this,"\t",e)}async image(e){const t=await this.url();return new Promise(((n,i)=>{const s=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(s.crossOrigin="anonymous"),Object.assign(s,e),s.onload=()=>n(s),s.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),s.src=t}))}async arrow(){const[e,t]=await Promise.all([mt(ct.resolve()),Ft(this)]);return e.Table.from(t)}async sqlite(){return _t.open(Ft(this))}async zip(){const[e,t]=await Promise.all([mt(st.resolve()),this.arrayBuffer()]);return new $t(await e.loadAsync(t))}async xml(e="application/xml"){return(new DOMParser).parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,t]=await Promise.all([mt(ft.resolve()),this.arrayBuffer()]);return new At(await(new e.Workbook).xlsx.load(t))}}class Ot extends Nt{constructor(e,t,n){super(t,n),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}}function kt(e){throw new Error(`File not found: ${e}`)}class $t{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter((t=>!e.files[t].dir))}file(e){const t=this._.file(e+="");if(!t||t.dir)throw new Error(`file not found: ${e}`);return new Rt(t)}}class Rt extends Nt{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}var Lt={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var Bt=0;function Pt(e){return new Mt("O-"+(null==e?"":e+"-")+ ++Bt)}function Mt(e){this.id=e,this.href=new URL(`#${e}`,location)+""}Mt.prototype.toString=function(){return"url("+this.href+")"};var It={canvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},context2d:function(e,t,n){null==n&&(n=devicePixelRatio);var i=document.createElement("canvas");i.width=e*n,i.height=t*n,i.style.width=e+"px";var s=i.getContext("2d");return s.scale(n,n),s},download:function(e,t="untitled",n="Save"){const i=document.createElement("a"),s=i.appendChild(document.createElement("button"));async function o(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(i.href),i.removeAttribute("href"),s.textContent=n,s.disabled=!1}return s.textContent=n,i.download=t,i.onclick=async t=>{if(s.disabled=!0,i.href)return o();s.textContent="Saving…";try{const t=await("function"==typeof e?e():e);s.textContent="Download",i.href=URL.createObjectURL(t)}catch(e){s.textContent=n}if(t.eventPhase)return o();s.disabled=!1},i},element:function(e,t){var n,i=e+="",s=i.indexOf(":");s>=0&&"xmlns"!==(i=e.slice(0,s))&&(e=e.slice(s+1));var o=Lt.hasOwnProperty(i)?document.createElementNS(Lt[i],e):document.createElement(e);if(t)for(var r in t)s=(i=r).indexOf(":"),n=t[r],s>=0&&"xmlns"!==(i=r.slice(0,s))&&(r=r.slice(s+1)),Lt.hasOwnProperty(i)?o.setAttributeNS(Lt[i],r,n):o.setAttribute(r,n);return o},input:function(e){var t=document.createElement("input");return null!=e&&(t.type=e),t},range:function(e,t,n){1===arguments.length&&(t=e,e=null);var i=document.createElement("input");return i.min=e=null==e?0:+e,i.max=t=null==t?1:+t,i.step=null==n?"any":n=+n,i.type="range",i},select:function(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,(function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)})),t},svg:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n},text:function(e){return document.createTextNode(e)},uid:Pt};var Ht={buffer:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsArrayBuffer(e)}))},text:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsText(e)}))},url:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsDataURL(e)}))}};function Ut(){return this}function jt(e,t){let n=!1;if("function"!=typeof t)throw new Error("dispose is not a function");return{[Symbol.iterator]:Ut,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function qt(e){let t,n,i=!1;const s=e((function(e){n?(n(e),n=null):i=!0;return t=e}));if(null!=s&&"function"!=typeof s)throw new Error("function"==typeof s.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:Ut,throw:()=>({done:!0}),return:()=>(null!=s&&s(),{done:!0}),next:function(){return{done:!1,value:i?(i=!1,Promise.resolve(t)):new Promise((e=>n=e))}}}}function Xt(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,(e=>e.value));default:return e.value}}var Wt={disposable:jt,filter:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)t(n.value,++i)&&(yield n.value)},input:function(e){return qt((function(t){var n=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),i=Xt(e);function s(){t(Xt(e))}return e.addEventListener(n,s),void 0!==i&&t(i),function(){e.removeEventListener(n,s)}}))},map:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)yield t(n.value,++i)},observe:qt,queue:function(e){let t;const n=[],i=e((function(e){n.push(e),t&&(t(n.shift()),t=null);return e}));if(null!=i&&"function"!=typeof i)throw new Error("function"==typeof i.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:Ut,throw:()=>({done:!0}),return:()=>(null!=i&&i(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise((e=>t=e))}}}},range:function*(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var i=-1,s=0|Math.max(0,Math.ceil((t-e)/n));++i<s;)yield e+i*n},valueAt:function(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0))for(var n,i=-1;!(n=e.next()).done;)if(++i===t)return n.value},worker:function(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return jt(n,(()=>{n.terminate(),URL.revokeObjectURL(t)}))}};function zt(e,t){return function(n){var i,s,o,r,a,u,l,c,d=n[0],h=[],f=null,p=-1;for(a=1,u=arguments.length;a<u;++a){if((i=arguments[a])instanceof Node)h[++p]=i,d+="\x3c!--o:"+p+"--\x3e";else if(Array.isArray(i)){for(l=0,c=i.length;l<c;++l)(s=i[l])instanceof Node?(null===f&&(h[++p]=f=document.createDocumentFragment(),d+="\x3c!--o:"+p+"--\x3e"),f.appendChild(s)):(f=null,d+=s);f=null}else d+=i;d+=n[a]}if(f=e(d),++p>0){for(o=new Array(p),r=document.createTreeWalker(f,NodeFilter.SHOW_COMMENT,null,!1);r.nextNode();)s=r.currentNode,/^o:/.test(s.nodeValue)&&(o[+s.nodeValue.slice(2)]=s);for(a=0;a<p;++a)(s=o[a])&&s.parentNode.replaceChild(h[a],s)}return 1===f.childNodes.length?f.removeChild(f.firstChild):11===f.nodeType?((s=t()).appendChild(f),s):f}}var Yt=zt((function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)}),(function(){return document.createElement("span")}));function Vt(e){let t;Object.defineProperties(this,{generator:{value:qt((e=>{t=e}))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}function*Gt(){for(;;)yield Date.now()}var Zt=new Map;function Kt(e,t){var n;return(n=Zt.get(e=+e))?n.then((()=>t)):(n=Date.now())>=e?Promise.resolve(t):function(e,t){var n=new Promise((function(n){Zt.delete(t);var i=t-e;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(n,i)}));return Zt.set(t,n),n}(n,e).then((()=>t))}var Jt={delay:function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},tick:function(e,t){return Kt(Math.ceil((Date.now()+1)/e)*e,t)},when:Kt};function Qt(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}var en=zt((function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t}),(function(){return document.createElementNS("http://www.w3.org/2000/svg","g")})),tn=String.raw;function nn(e){return new Promise((function(t,n){var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onerror=n,i.onload=t,document.head.appendChild(i)}))}function sn(){return qt((function(e){var t=e(document.body.clientWidth);function n(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}))}const on=Object.assign((async(e,t,n)=>{const i=function(e,t){const n=t&&"function"==typeof t.escape?t.escape:e=>e,{select:i,from:s,filter:o,sort:r,slice:a}=e;if(null===s.table||null===i.columns||i.columns&&0===i.columns.length)return;const u=i.columns.map((e=>`t.${n(e)}`)),l=[[`SELECT ${u} FROM ${an(s.table,n)} t`]];for(let e=0;e<o.length;++e)un(e?"\nAND ":"\nWHERE ",l),cn(o[e],l);for(let e=0;e<r.length;++e)un(e?", ":"\nORDER BY ",l),ln(r[e],l);null===a.to&&null===a.from||un("\nLIMIT "+(null!==a.to?a.to-(a.from||0):1e9),l);null!==a.from&&un(` OFFSET ${a.from}`,l);return l}(t,await e);return i?rn(await e,i,n):null}),{sql:(e,t)=>async function(){return rn(e,arguments,t)}});async function rn(e,t,n){if(e){if("function"==typeof e.queryTag){const i=new AbortController,s={signal:i.signal};if(n.then((()=>i.abort("invalidated"))),"function"==typeof e.queryStream)return async function*(e){const t=await e,n=[];n.done=!1,n.error=null,n.schema=t.schema;try{const e=t.readRows();do{const t=await e.next();if(t.done)n.done=!0;else for(const e of t.value)n.push(e);yield n}while(!n.done)}catch(e){n.error=e,yield n}}(e.queryStream(...e.queryTag.apply(e,t),s));if("function"==typeof e.query)return e.query(...e.queryTag.apply(e,t),s)}if("function"==typeof e.sql)return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}}function an(e,t){if("object"==typeof e){let n="";return null!=e.database&&(n+=t(e.database)+"."),null!=e.schema&&(n+=t(e.schema)+"."),n+=t(e.table),n}return e}function un(e,t){const n=t[0];n[n.length-1]+=e}function ln({column:e,direction:t},n){un(`t.${e} ${t.toUpperCase()}`,n)}function cn({type:e,operands:t},n){if(t.length<1)throw new Error("Invalid operand length");if(1===t.length)switch(dn(t[0],n),e){case"n":return void un(" IS NULL",n);case"nn":return void un(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(2!==t.length||["in","nin"].includes(e)){var i;switch(dn(t[0],n),e){case"in":un(" IN (",n);break;case"nin":un(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}!function(e,t){let n=!0;for(const i of e)n?n=!1:un(",",t),t.push(i.value),t[0].push("")}(t.slice(1),n),un(")",n)}else{if(["c","nc"].includes(e)){switch(dn(t[0],n),e){case"c":un(" LIKE ",n);break;case"nc":un(" NOT LIKE ",n)}return void dn((i=t[1],{...i,value:`%${i.value}%`}),n)}switch(dn(t[0],n),e){case"eq":un(" = ",n);break;case"ne":un(" <> ",n);break;case"gt":un(" > ",n);break;case"lt":un(" < ",n);break;case"gte":un(" >= ",n);break;case"lte":un(" <= ",n);break;default:throw new Error("Invalid filter operation")}dn(t[1],n)}}function dn(e,t){"column"===e.type?un(`t.${e.value}`,t):(t.push(e.value),t[0].push(""))}var hn=Object.assign(Object.defineProperties((function(e){const t=function(e){return null==e?mt:pe(e)}(e);var n;Object.defineProperties(this,(n={FileAttachment:()=>kt,Mutable:()=>Vt,now:Gt,width:sn,dot:()=>t(Qe.resolve()),htl:()=>t(it.resolve()),html:()=>Yt,md:()=>function(e){return e(ot.resolve()).then((function(t){return zt((function(n){var i=document.createElement("div");i.innerHTML=t(n,{langPrefix:""}).trim();var s=i.querySelectorAll("pre code[class]");return s.length>0&&e(et.resolve()).then((function(t){s.forEach((function(n){function i(){t.highlightBlock(n),n.parentNode.classList.add("observablehq--md-pre")}t.getLanguage(n.className)?i():e(et.resolve("async-languages/index.js")).then((i=>{if(i.has(n.className))return e(et.resolve("async-languages/"+i.get(n.className))).then((e=>{t.registerLanguage(n.className,e)}))})).then(i,i)}))})),i}),(function(){return document.createElement("div")}))}))}(t),svg:()=>en,tex:()=>function(e){return Promise.all([e(tt.resolve()),e.resolve(tt.resolve("dist/katex.min.css")).then(nn)]).then((function(e){var t=e[0],n=i();function i(e){return function(){var n=document.createElement("div");return t.render(tn.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.options=i,n.block=i({displayMode:!0}),n}))}(t),_:()=>t(nt.resolve()),aq:()=>t.alias({"apache-arrow":ct.resolve()})(dt.resolve()),Arrow:()=>t(ct.resolve()),d3:()=>t(Ze.resolve()),Inputs:()=>t(Ke.resolve()).then((e=>({...e,file:e.fileOf(Nt)}))),L:()=>async function(e){const t=await e(gt.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(gt.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}(t),mermaid:()=>async function(e){const t=await e(pt.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const e=document.createElement("div");return e.innerHTML=t.render(Pt().id,String.raw.apply(String,arguments)),e.removeChild(e.firstChild)}}(t),Plot:()=>t(Je.resolve()),__query:()=>on,require:()=>t,resolve:()=>Qt,SQLite:()=>vt(t),SQLiteDatabaseClient:()=>_t,topojson:()=>t(ht.resolve()),vl:()=>async function(e){const[t,n,i]=await Promise.all([at,ut,lt].map((t=>e(t.resolve()))));return i.register(t,n)}(t),aapl:()=>new Ot("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new Ot("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new Ot("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new Ot("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new Ot("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new Ot("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new Ot("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new Ot("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new Ot("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new Ot("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new Ot("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:It,Files:Ht,Generators:Wt,Promises:Jt},Object.fromEntries(Object.entries(n).map(fn))))}),{resolve:{get:()=>mt.resolve,enumerable:!0,configurable:!0},require:{get:()=>mt,set:function(e){mt=e},enumerable:!0,configurable:!0}}),{resolveFrom:he,requireFrom:pe});function fn([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}function pn(e,t){this.message=e+"",this.input=t}function gn(e){return function(){return e}}function mn(e){return e}pn.prototype=Object.create(Error.prototype),pn.prototype.name="RuntimeError",pn.prototype.constructor=pn;var vn=Array.prototype.map;function _n(){}var bn={};function wn(e,t,n){var i;n||(n=bn),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:An,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:_n,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==bn,writable:!0},_rejector:{value:(i=this,function(e){if(e===Sn)throw e;if(e===An)throw new pn(i._name+" is not defined",i._name);if(e instanceof Error&&e.message)throw new pn(e.message,i._name);throw new pn(i._name+" could not be resolved",i._name)})},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function En(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function yn(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function An(){throw An}function Sn(){throw Sn}function Dn(e){return function(){throw new pn(e+" is defined more than once")}}function xn(e,t,n){var i=this._module._scope,s=this._module._runtime;if(this._inputs.forEach(yn,this),t.forEach(En,this),this._inputs=t,this._definition=n,this._value=void 0,n===_n?s._variables.delete(this):s._variables.add(this),e!==this._name||i.get(e)!==this){var o,r;if(this._name)if(this._outputs.size)i.delete(this._name),(r=this._module._resolve(this._name))._outputs=this._outputs,this._outputs=new Set,r._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(this)]=r}),this),r._outputs.forEach(s._updates.add,s._updates),s._dirty.add(r).add(this),i.set(this._name,r);else if((r=i.get(this._name))===this)i.delete(this._name);else{if(3!==r._type)throw new Error;r._duplicates.delete(this),this._duplicate=void 0,1===r._duplicates.size&&(r=r._duplicates.keys().next().value,o=i.get(this._name),r._outputs=o._outputs,o._outputs=new Set,r._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(o)]=r})),r._definition=r._duplicate,r._duplicate=void 0,s._dirty.add(o).add(r),s._updates.add(r),i.set(this._name,r))}if(this._outputs.size)throw new Error;e&&((r=i.get(e))?3===r._type?(this._definition=Dn(e),this._duplicate=n,r._duplicates.add(this)):2===r._type?(this._outputs=r._outputs,r._outputs=new Set,this._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(r)]=this}),this),s._dirty.add(r).add(this),i.set(e,this)):(r._duplicate=r._definition,this._duplicate=n,(o=new wn(3,this._module))._name=e,o._definition=this._definition=r._definition=Dn(e),o._outputs=r._outputs,r._outputs=new Set,o._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(r)]=o})),o._duplicates=new Set([this,r]),s._dirty.add(r).add(o),s._updates.add(r).add(o),i.set(e,o)):i.set(e,this)),this._name=e}return this._version>0&&++this._version,s._updates.add(this),s._compute(),this}function Cn(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",On],["invalidation",kn],["visibility",$n],...t])},_source:{value:null,writable:!0}})}async function Fn(e,t){await e._compute();try{return await t._promise}catch(n){if(n===Sn)return Fn(e,t);throw n}}function Tn(e){return e._name}Object.defineProperties(wn.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e,this._name)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"==typeof e?t=null:(t=e,e=null)}return xn.call(this,null==e?null:e+"",null==t?[]:vn.call(t,this._module._resolve,this._module),"function"==typeof n?n:gn(n))},writable:!0,configurable:!0},delete:{value:function(){return xn.call(this,null,[],_n)},writable:!0,configurable:!0},import:{value:function(e,t,n){arguments.length<3&&(n=t,t=e);return xn.call(this,t+"",[n._resolve(e+"")],mn)},writable:!0,configurable:!0}}),Object.defineProperties(Cn.prototype,{_resolve:{value:function(e){var t,n=this._scope.get(e);if(!n)if(n=new wn(2,this),this._builtins.has(e))n.define(e,gn(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(t){return n.define(e,function(e){return function(){throw e}}(t))}void 0===t?this._scope.set(n._name=e,n):n.define(e,gn(t))}return n},writable:!0,configurable:!0},redefine:{value:function(e){var t=this._scope.get(e);if(!t)throw new pn(e+" is not defined");if(3===t._type)throw new pn(e+" is defined more than once");return t.define.apply(t,arguments)},writable:!0,configurable:!0},define:{value:function(){var e=new wn(1,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){const n=new Map,i=new Set,s=[];function o(e){let t=n.get(e);return t||(t=new Cn(e._runtime,e._builtins),t._source=e,n.set(e,t),s.push([t,e]),i.add(e),t)}const r=o(this);for(const n of e){const{alias:e,name:i}="object"==typeof n?n:{name:n};r.import(i,e??i,t)}for(const e of i)for(const[t,n]of e._scope)if(n._definition===mn){if(e===this&&r._scope.has(t))continue;const i=n._inputs[0]._module;i._source&&o(i)}for(const[e,t]of s)for(const[i,s]of t._scope){const t=e._scope.get(i);if(!t||2===t._type)if(s._definition===mn){const t=s._inputs[0],o=t._module;e.import(t._name,i,n.get(o)||o)}else e.define(i,s._inputs.map(Tn),s._definition)}return r},writable:!0,configurable:!0},import:{value:function(){var e=new wn(1,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},value:{value:async function(e){var t=this._scope.get(e);if(!t)throw new pn(e+" is not defined");if(t._observer!==bn)return Fn(this._runtime,t);t=this.variable(!0).define([e],mn);try{return await Fn(this._runtime,t)}finally{t.delete()}},writable:!0,configurable:!0},variable:{value:function(e){return new wn(1,this,e)},writable:!0,configurable:!0},builtin:{value:function(e,t){this._builtins.set(e,t)},writable:!0,configurable:!0}});const Nn="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof setImmediate?setImmediate:e=>setTimeout(e,0);var On={},kn={},$n={};function Rn(e=new hn,t=qn){var n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(var i in e)new wn(2,n).define(i,[],e[i])}function Ln(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function Bn(e){++e._indegree}function Pn(e){--e._indegree}function Mn(e){return e._promise.catch(e._rejector)}function In(e){return new Promise((function(t){e._invalidate=t}))}function Hn(e,t){let n,i,s="function"==typeof IntersectionObserver&&t._observer&&t._observer._node,o=!s,r=_n,a=_n;return s&&(i=new IntersectionObserver((([e])=>(o=e.isIntersecting)&&(n=null,r()))),i.observe(s),e.then((()=>(i.disconnect(),i=null,a())))),function(e){return o?Promise.resolve(e):i?(n||(n=new Promise(((e,t)=>(r=e,a=t)))),n.then((()=>e))):Promise.reject()}}function Un(e){e._invalidate(),e._invalidate=_n,e._pending();const t=e._value,n=++e._version;let i=null;const s=e._promise=(e._inputs.length?Promise.all(e._inputs.map(Mn)).then((function(s){if(e._version!==n)throw Sn;for(var o=0,r=s.length;o<r;++o)switch(s[o]){case kn:s[o]=i=In(e);break;case $n:i||(i=In(e)),s[o]=Hn(i,e);break;case On:s[o]=e}return e._definition.apply(t,s)})):new Promise((n=>n(e._definition.call(t))))).then((function(t){if(e._version!==n)throw Sn;if(function(e){return e&&"function"==typeof e.next&&"function"==typeof e.return}(t))return(i||In(e)).then((s=t,function(){s.return()})),function(e,t,n){const i=e._module._runtime;let s;function o(e){return new Promise((e=>e(n.next(s)))).then((({done:t,value:n})=>t?void 0:Promise.resolve(n).then(e)))}function r(){const n=o((o=>{if(e._version!==t)throw Sn;return s=o,a(o,n).then((()=>i._precompute(r))),e._fulfilled(o),o}));n.catch((i=>{i!==Sn&&e._version===t&&(a(void 0,n),e._rejected(i))}))}function a(t,n){return e._value=t,e._promise=n,e._outputs.forEach(i._updates.add,i._updates),i._compute()}return o((n=>{if(e._version!==t)throw Sn;return s=n,i._precompute(r),n}))}(e,n,t);var s;return t}));s.then((t=>{e._value=t,e._fulfilled(t)}),(t=>{t!==Sn&&(e._value=void 0,e._rejected(t))}))}function jn(e,t){e._invalidate(),e._invalidate=_n,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(_n),e._value=void 0,e._rejected(t)}function qn(e){return window[e]}Object.defineProperties(Rn,{load:{value:function(e,t,n){if("function"==typeof t&&(n=t,t=null),"function"!=typeof n)throw new Error("invalid observer");null==t&&(t=new hn);const{modules:i,id:s}=e,o=new Map,r=new Rn(t),a=u(s);function u(e){let t=o.get(e);return t||o.set(e,t=r.module()),t}for(const e of i){const t=u(e.id);let i=0;for(const s of e.variables)s.from?t.import(s.remote,s.name,u(s.from)):t===a?t.variable(n(s,i,e.variables)).define(s.name,s.inputs,s.value):t.define(s.name,s.inputs,s.value),++i}return r},writable:!0,configurable:!0}}),Object.defineProperties(Rn.prototype,{_precompute:{value:function(e){this._precomputes.push(e),this._compute()},writable:!0,configurable:!0},_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){return new Promise(Nn).then((()=>this._disposed?void 0:this._computeNow()))},writable:!0,configurable:!0},_computeNow:{value:async function(){var e,t,n=[],i=this._precomputes;if(i.length){this._precomputes=[];for(const e of i)e();await function(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then((()=>{}));return t}(3)}(e=new Set(this._dirty)).forEach((function(t){t._inputs.forEach(e.add,e);const n=function(e){if(e._observer!==bn)return!0;var t=new Set(e._outputs);for(const e of t){if(e._observer!==bn)return!0;e._outputs.forEach(t.add,t)}return!1}(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n}),this),(e=new Set(this._updates)).forEach((function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=NaN,e.delete(t))})),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach((function(e){e._outputs.forEach(Bn)}));do{for(e.forEach((function(e){0===e._indegree&&n.push(e)}));t=n.pop();)Un(t),t._outputs.forEach(s),e.delete(t);e.forEach((function(t){Ln(t)&&(jn(t,new pn("circular definition")),t._outputs.forEach(Pn),e.delete(t))}))}while(e.size);function s(e){0==--e._indegree&&n.push(e)}},writable:!0,configurable:!0},dispose:{value:function(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach((e=>{e._invalidate(),e._version=NaN}))},writable:!0,configurable:!0},module:{value:function(e,t=_n){let n;if(void 0===e)return(n=this._init)?(this._init=null,n):new Cn(this);if(n=this._modules.get(e),n)return n;this._init=n=new Cn(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n},writable:!0,configurable:!0},fileAttachments:{value:function(e){return Object.assign((t=>{const n=e(t+="");if(null==n)throw new Error(`File not found: ${t}`);if("object"==typeof n&&"url"in n){const{url:e,mimeType:i}=n;return new Ot(e,t,i)}return new Ot(n,t)}),{prototype:Ot.prototype})},writable:!0,configurable:!0}}),Rn.prototype.fileAttachments((function(e){return e}));const Xn=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","BR","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL","TR","TH","TD","COLGROUP","COL","CAPTION","THEAD","TBODY","TFOOT"],Wn=/[\t-\r -#%-\*,-\/:;\?@\[-\]_\{\}\x85\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/u,zn={NO_SUFFIX_MATCH:0,SUFFIX_MATCH:1,MISPLACED_SUFFIX:2},Yn=(e,t,n,i)=>{const s=i.createRange();s.setStart(t.endContainer,t.endOffset),s.setEnd(n.endContainer,n.endOffset),Gn(s);const o=ti(e,s);return null==o?zn.NO_SUFFIX_MATCH:0!==o.compareBoundaryPoints(Range.START_TO_START,s)?zn.MISPLACED_SUFFIX:zn.SUFFIX_MATCH},Vn=(e,t,n)=>{try{e.setStart(t,n+1)}catch(n){e.setStartAfter(t)}},Gn=e=>{const t=Zn(e);let n=t.nextNode();for(;!e.collapsed&&null!=n;){if(n!==e.startContainer&&e.setStart(n,0),n.textContent.length>e.startOffset){if(!n.textContent[e.startOffset].match(/\s/))return}try{e.setStart(n,e.startOffset+1)}catch(i){n=t.nextNode(),null==n?e.collapse():e.setStart(n,0)}}},Zn=e=>document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(t=>Qn(t,e))),Kn=e=>{let t=e;for(;null!=t&&!(t instanceof HTMLElement);)t=t.parentNode;if(null!=t){const e=window.getComputedStyle(t);if("hidden"===e.visibility||"none"===e.display||0===e.height||0===e.width||0===e.opacity)return!1}return!0},Jn=(e,t)=>(null==t||t.intersectsNode(e))&&Kn(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT,Qn=(e,t)=>(null==t||t.intersectsNode(e))&&Kn(e)?e.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT,ei=(e,t)=>{const n=[];let i=[];const s=Array.from(function*(e,t){const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:t}),i=new Set;for(;null!==ai(n,i);)yield n.currentNode}(e,(e=>Jn(e,t))));for(const e of s)e.nodeType===Node.TEXT_NODE?i.push(e):e instanceof HTMLElement&&Xn.includes(e.tagName)&&i.length>0&&(n.push(i),i=[]);return i.length>0&&n.push(i),n};const ti=(e,t)=>{const n=ei(t.commonAncestorContainer,t),i=ri();for(const s of n){const n=ni(e,t,s,i);if(void 0!==n)return n}},ni=(e,t,n,i)=>{if(!e||!t||!(n||[]).length)return;const s=oi(((e,t,n)=>{let i="";return i=1===e.length?e[0].textContent.substring(t,n):e[0].textContent.substring(t)+e.slice(1,-1).reduce(((e,t)=>e+t.textContent),"")+e.slice(-1)[0].textContent.substring(0,n),i.replace(/[\t\n\r ]+/g," ")})(n,0,void 0)),o=oi(e);let r,a,u=n[0]===t.startNode?t.startOffset:0;for(;u<s.length;){const e=s.indexOf(o,u);if(-1===e)return;if(si(s,e,o.length,i)&&(r=ii(e,n,!1),a=ii(e+o.length,n,!0)),null!=r&&null!=a){const e=new Range;if(e.setStart(r.node,r.offset),e.setEnd(a.node,a.offset),t.compareBoundaryPoints(Range.START_TO_START,e)<=0&&t.compareBoundaryPoints(Range.END_TO_END,e)>=0)return e}u=e+1}},ii=(e,t,n)=>{let i,s=0;for(let o=0;o<t.length;o++){const r=t[o];i||(i=oi(r.data));let a=s+i.length;if(n&&(a+=1),a>e){const t=e-s;let o=Math.min(e-s,r.data.length);const a=n?i.substring(0,t):i.substring(t);let u=oi(n?r.data.substring(0,o):r.data.substring(o));const l=(n?-1:1)*(a.length>u.length?-1:1);for(;o>=0&&o<=r.data.length;){if(u.length===a.length)return{node:r,offset:o};o+=l,u=oi(n?r.data.substring(0,o):r.data.substring(o))}}if(s+=i.length,o+1<t.length){const e=oi(t[o+1].data);" "===i.slice(-1)&&" "===e.slice(0,1)&&(s-=1),i=e}}},si=(e,t,n,i)=>{if(t<0||t>=e.length||n<=0||t+n>e.length)return!1;if(i){const s=i.segment(e),o=s.containing(t);if(!o)return!1;if(o.isWordLike&&o.index!=t)return!1;const r=t+n,a=s.containing(r);if(a&&a.isWordLike&&a.index!=r)return!1}else{if(e[t].match(Wn)&&(++t,!--n))return!1;if(e[t+n-1].match(Wn)&&!--n)return!1;if(0!==t&&!e[t-1].match(Wn))return!1;if(t+n!==e.length&&!e[t+n].match(Wn))return!1}return!0},oi=e=>(e||"").normalize("NFKD").replace(/\s+/g," ").replace(/[\u0300-\u036f]/g,"").toLowerCase(),ri=()=>{if(Intl.Segmenter){let e=document.documentElement.lang;return e||(e=navigator.languages),new Intl.Segmenter(e,{granularity:"word"})}},ai=(e,t)=>{if(!t.has(e.currentNode)){const t=e.firstChild();if(null!==t)return t}const n=e.nextSibling();if(null!==n)return n;const i=e.parentNode();return null!==i&&t.add(i),i},ui={BLOCK_ELEMENTS:Xn,BOUNDARY_CHARS:Wn,NON_BOUNDARY_CHARS:/[^\t-\r -#%-\*,-\/:;\?@\[-\]_\{\}\x85\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/u,acceptNodeIfVisibleInRange:Jn,normalizeString:oi,makeNewSegmenter:ri,forwardTraverse:ai,backwardTraverse:(e,t)=>{if(!t.has(e.currentNode)){const t=e.lastChild();if(null!==t)return t}const n=e.previousSibling();if(null!==n)return n;const i=e.parentNode();return null!==i&&t.add(i),i},makeTextNodeWalker:Zn,isNodeVisible:Kn};"undefined"!=typeof goog&&goog.declareModuleId("googleChromeLabs.textFragmentPolyfill.textFragmentUtils");let li;const ci=0,di=1,hi=2,fi=3,pi=4,gi=(e,t)=>{let n;vi(t);try{n=e.getRangeAt(0)}catch{return{status:di}}Oi(n),Li(n);const i=n.cloneRange();if(ki(n),n.collapsed)return{status:di};let s;if(Si(n)){const e=ui.normalizeString(n.toString()),t={textStart:e};if(e.length>=20&&yi(t))return{status:ci,fragment:t};s=(new wi).setExactTextMatch(e)}else{const e=_i(n),t=bi(n);s=e&&t?(new wi).setStartAndEndSearchSpace(e,t):(new wi).setSharedSearchSpace(n.toString().trim())}const o=document.createRange();o.selectNodeContents(document.body);const r=o.cloneRange();o.setEnd(i.startContainer,i.startOffset),r.setStart(i.endContainer,i.endOffset);const a=bi(o),u=_i(r);(a||u)&&s.setPrefixAndSuffixSearchSpace(a,u),s.useSegmenter(ui.makeNewSegmenter());let l=!1;do{mi(),l=s.embiggen();const e=s.tryToMakeUniqueFragment();if(null!=e)return{status:ci,fragment:e}}while(l);return{status:hi}},mi=()=>{const e=Date.now()-li;if(e>500){const t=new Error(`Fragment generation timed out after ${e} ms.`);throw t.isTimeout=!0,t}},vi=e=>{li=e},_i=e=>{let t=Di(e);const n=Ni(t,e.endContainer);if(!n)return;const i=new Set;e.startContainer.nodeType===Node.ELEMENT_NODE&&e.startOffset===e.startContainer.childNodes.length&&i.add(e.startContainer);const s=t,o=new Ei(e,!0),r=e.cloneRange();for(;!r.collapsed&&null!=t;){if(mi(),t.contains(s)?r.setStartAfter(t):r.setStartBefore(t),o.appendNode(t),null!==o.textInBlock)return o.textInBlock;t=ui.forwardTraverse(n,i)}},bi=e=>{let t=xi(e);const n=Ni(t,e.startContainer);if(!n)return;const i=new Set;e.endContainer.nodeType===Node.ELEMENT_NODE&&0===e.endOffset&&i.add(e.endContainer);const s=t,o=new Ei(e,!1),r=e.cloneRange();for(;!r.collapsed&&null!=t;){if(mi(),t.contains(s)?r.setEnd(t,0):r.setEndAfter(t),o.appendNode(t),null!==o.textInBlock)return o.textInBlock;t=ui.backwardTraverse(n,i)}},wi=class{constructor(){this.Mode={ALL_PARTS:1,SHARED_START_AND_END:2,CONTEXT_ONLY:3},this.startOffset=null,this.endOffset=null,this.prefixOffset=null,this.suffixOffset=null,this.prefixSearchSpace="",this.backwardsPrefixSearchSpace="",this.suffixSearchSpace="",this.numIterations=0}tryToMakeUniqueFragment(){let e;if(e=this.mode===this.Mode.CONTEXT_ONLY?{textStart:this.exactTextMatch}:{textStart:this.getStartSearchSpace().substring(0,this.startOffset).trim(),textEnd:this.getEndSearchSpace().substring(this.endOffset).trim()},null!=this.prefixOffset){const t=this.getPrefixSearchSpace().substring(this.prefixOffset).trim();t&&(e.prefix=t)}if(null!=this.suffixOffset){const t=this.getSuffixSearchSpace().substring(0,this.suffixOffset).trim();t&&(e.suffix=t)}return yi(e)?e:void 0}embiggen(){let e=!0;if(this.mode===this.Mode.SHARED_START_AND_END?this.startOffset>=this.endOffset&&(e=!1):this.mode===this.Mode.ALL_PARTS?this.startOffset===this.getStartSearchSpace().length&&this.backwardsEndOffset()===this.getEndSearchSpace().length&&(e=!1):this.mode===this.Mode.CONTEXT_ONLY&&(e=!1),e){const e=this.getNumberOfRangeWordsToAdd();if(this.startOffset<this.getStartSearchSpace().length){let t=0;if(null!=this.getStartSegments())for(;t<e&&this.startOffset<this.getStartSearchSpace().length;)this.startOffset=this.getNextOffsetForwards(this.getStartSegments(),this.startOffset,this.getStartSearchSpace()),t++;else{let n=this.startOffset;do{mi();const e=this.getStartSearchSpace().substring(this.startOffset+1).search(ui.BOUNDARY_CHARS);this.startOffset=-1===e?this.getStartSearchSpace().length:this.startOffset+1+e,-1!==this.getStartSearchSpace().substring(n,this.startOffset).search(ui.NON_BOUNDARY_CHARS)&&(n=this.startOffset,t++)}while(this.startOffset<this.getStartSearchSpace().length&&t<e)}this.mode===this.Mode.SHARED_START_AND_END&&(this.startOffset=Math.min(this.startOffset,this.endOffset))}if(this.backwardsEndOffset()<this.getEndSearchSpace().length){let t=0;if(null!=this.getEndSegments())for(;t<e&&this.endOffset>0;)this.endOffset=this.getNextOffsetBackwards(this.getEndSegments(),this.endOffset),t++;else{let n=this.backwardsEndOffset();do{mi();const e=this.getBackwardsEndSearchSpace().substring(this.backwardsEndOffset()+1).search(ui.BOUNDARY_CHARS);-1===e?this.setBackwardsEndOffset(this.getEndSearchSpace().length):this.setBackwardsEndOffset(this.backwardsEndOffset()+1+e),-1!==this.getBackwardsEndSearchSpace().substring(n,this.backwardsEndOffset()).search(ui.NON_BOUNDARY_CHARS)&&(n=this.backwardsEndOffset(),t++)}while(this.backwardsEndOffset()<this.getEndSearchSpace().length&&t<e)}this.mode===this.Mode.SHARED_START_AND_END&&(this.endOffset=Math.max(this.startOffset,this.endOffset))}}let t=!1;if((!e||this.startOffset+this.backwardsEndOffset()<20||this.numIterations>=1)&&(null!=this.backwardsPrefixOffset()&&this.backwardsPrefixOffset()!==this.getPrefixSearchSpace().length||null!=this.suffixOffset&&this.suffixOffset!==this.getSuffixSearchSpace().length)&&(t=!0),t){const e=this.getNumberOfContextWordsToAdd();if(this.backwardsPrefixOffset()<this.getPrefixSearchSpace().length){let t=0;if(null!=this.getPrefixSegments())for(;t<e&&this.prefixOffset>0;)this.prefixOffset=this.getNextOffsetBackwards(this.getPrefixSegments(),this.prefixOffset),t++;else{let n=this.backwardsPrefixOffset();do{mi();const e=this.getBackwardsPrefixSearchSpace().substring(this.backwardsPrefixOffset()+1).search(ui.BOUNDARY_CHARS);-1===e?this.setBackwardsPrefixOffset(this.getBackwardsPrefixSearchSpace().length):this.setBackwardsPrefixOffset(this.backwardsPrefixOffset()+1+e),-1!==this.getBackwardsPrefixSearchSpace().substring(n,this.backwardsPrefixOffset()).search(ui.NON_BOUNDARY_CHARS)&&(n=this.backwardsPrefixOffset(),t++)}while(this.backwardsPrefixOffset()<this.getPrefixSearchSpace().length&&t<e)}}if(this.suffixOffset<this.getSuffixSearchSpace().length){let t=0;if(null!=this.getSuffixSegments())for(;t<e&&this.suffixOffset<this.getSuffixSearchSpace().length;)this.suffixOffset=this.getNextOffsetForwards(this.getSuffixSegments(),this.suffixOffset,this.suffixOffset),t++;else{let n=this.suffixOffset;do{mi();const e=this.getSuffixSearchSpace().substring(this.suffixOffset+1).search(ui.BOUNDARY_CHARS);this.suffixOffset=-1===e?this.getSuffixSearchSpace().length:this.suffixOffset+1+e,-1!==this.getSuffixSearchSpace().substring(n,this.suffixOffset).search(ui.NON_BOUNDARY_CHARS)&&(n=this.suffixOffset,t++)}while(this.suffixOffset<this.getSuffixSearchSpace().length&&t<e)}}}return this.numIterations++,e||t}setStartAndEndSearchSpace(e,t){return this.startSearchSpace=e,this.endSearchSpace=t,this.backwardsEndSearchSpace=Ai(t),this.startOffset=0,this.endOffset=t.length,this.mode=this.Mode.ALL_PARTS,this}setSharedSearchSpace(e){return this.sharedSearchSpace=e,this.backwardsSharedSearchSpace=Ai(e),this.startOffset=0,this.endOffset=e.length,this.mode=this.Mode.SHARED_START_AND_END,this}setExactTextMatch(e){return this.exactTextMatch=e,this.mode=this.Mode.CONTEXT_ONLY,this}setPrefixAndSuffixSearchSpace(e,t){return e&&(this.prefixSearchSpace=e,this.backwardsPrefixSearchSpace=Ai(e),this.prefixOffset=e.length),t&&(this.suffixSearchSpace=t,this.suffixOffset=0),this}useSegmenter(e){return null==e||(this.mode===this.Mode.ALL_PARTS?(this.startSegments=e.segment(this.startSearchSpace),this.endSegments=e.segment(this.endSearchSpace)):this.mode===this.Mode.SHARED_START_AND_END&&(this.sharedSegments=e.segment(this.sharedSearchSpace)),this.prefixSearchSpace&&(this.prefixSegments=e.segment(this.prefixSearchSpace)),this.suffixSearchSpace&&(this.suffixSegments=e.segment(this.suffixSearchSpace))),this}getNumberOfContextWordsToAdd(){return 0===this.backwardsPrefixOffset()&&0===this.suffixOffset?3:1}getNumberOfRangeWordsToAdd(){return 0===this.startOffset&&0===this.backwardsEndOffset()?3:1}getNextOffsetForwards(e,t,n){let i=e.containing(t);for(;null!=i;){mi();const t=i.index+i.segment.length;if(i.isWordLike)return t;i=e.containing(t)}return n.length}getNextOffsetBackwards(e,t){let n=e.containing(t);for(n&&t!=n.index||(n=e.containing(t-1));null!=n;){if(mi(),n.isWordLike)return n.index;n=e.containing(n.index-1)}return 0}getStartSearchSpace(){return this.mode===this.Mode.SHARED_START_AND_END?this.sharedSearchSpace:this.startSearchSpace}getStartSegments(){return this.mode===this.Mode.SHARED_START_AND_END?this.sharedSegments:this.startSegments}getEndSearchSpace(){return this.mode===this.Mode.SHARED_START_AND_END?this.sharedSearchSpace:this.endSearchSpace}getEndSegments(){return this.mode===this.Mode.SHARED_START_AND_END?this.sharedSegments:this.endSegments}getBackwardsEndSearchSpace(){return this.mode===this.Mode.SHARED_START_AND_END?this.backwardsSharedSearchSpace:this.backwardsEndSearchSpace}getPrefixSearchSpace(){return this.prefixSearchSpace}getPrefixSegments(){return this.prefixSegments}getBackwardsPrefixSearchSpace(){return this.backwardsPrefixSearchSpace}getSuffixSearchSpace(){return this.suffixSearchSpace}getSuffixSegments(){return this.suffixSegments}backwardsEndOffset(){return this.getEndSearchSpace().length-this.endOffset}setBackwardsEndOffset(e){this.endOffset=this.getEndSearchSpace().length-e}backwardsPrefixOffset(){return null==this.prefixOffset?null:this.getPrefixSearchSpace().length-this.prefixOffset}setBackwardsPrefixOffset(e){null!=this.prefixOffset&&(this.prefixOffset=this.getPrefixSearchSpace().length-e)}},Ei=class{constructor(e,t){this.searchRange=e,this.isForwardTraversal=t,this.textFound=!1,this.textNodes=[],this.textInBlock=null}appendNode(e){if(null!==this.textInBlock)return;if(Bi(e))return void(this.textFound?(this.isForwardTraversal||this.textNodes.reverse(),this.textInBlock=this.textNodes.map((e=>e.textContent)).join("").trim()):this.textNodes=[]);if(!Pi(e))return;const t=this.getNodeIntersectionWithRange(e);this.textFound=this.textFound||""!==t.textContent.trim(),this.textNodes.push(t)}getNodeIntersectionWithRange(e){let t=null,n=null;return e===this.searchRange.startContainer&&0!==this.searchRange.startOffset&&(t=this.searchRange.startOffset),e===this.searchRange.endContainer&&this.searchRange.endOffset!==e.textContent.length&&(n=this.searchRange.endOffset),null!==t||null!==n?{textContent:e.textContent.substring(t??0,n??e.textContent.length)}:e}},yi=e=>1===((e,t=document)=>{const n=[],i=t.createRange();for(i.selectNodeContents(t.body);!i.collapsed&&n.length<2;){let s;if(e.prefix){const n=ti(e.prefix,i);if(null==n)break;Vn(i,n.startContainer,n.startOffset);const o=t.createRange();if(o.setStart(n.endContainer,n.endOffset),o.setEnd(i.endContainer,i.endOffset),Gn(o),o.collapsed)break;if(s=ti(e.textStart,o),null==s)break;if(0!==s.compareBoundaryPoints(Range.START_TO_START,o))continue}else{if(s=ti(e.textStart,i),null==s)break;Vn(i,s.startContainer,s.startOffset)}if(e.textEnd){const o=t.createRange();o.setStart(s.endContainer,s.endOffset),o.setEnd(i.endContainer,i.endOffset);let r=!1;for(;!o.collapsed&&n.length<2;){const a=ti(e.textEnd,o);if(null==a)break;if(Vn(o,a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset),e.suffix){const o=Yn(e.suffix,s,i,t);if(o===zn.NO_SUFFIX_MATCH)break;if(o===zn.SUFFIX_MATCH){r=!0,n.push(s.cloneRange());continue}if(o===zn.MISPLACED_SUFFIX)continue}else r=!0,n.push(s.cloneRange())}if(!r)break}else if(e.suffix){const o=Yn(e.suffix,s,i,t);if(o===zn.NO_SUFFIX_MATCH)break;if(o===zn.SUFFIX_MATCH){n.push(s.cloneRange()),Vn(i,i.startContainer,i.startOffset);continue}if(o===zn.MISPLACED_SUFFIX)continue}else n.push(s.cloneRange())}return n})(e).length,Ai=e=>[...e||""].reverse().join(""),Si=e=>!(e.toString().length>300)&&!Ci(e),Di=e=>{let t=e.startContainer;return t.nodeType==Node.ELEMENT_NODE&&e.startOffset<t.childNodes.length&&(t=t.childNodes[e.startOffset]),t},xi=e=>{let t=e.endContainer;return t.nodeType==Node.ELEMENT_NODE&&e.endOffset>0&&(t=t.childNodes[e.endOffset-1]),t},Ci=e=>{const t=e.cloneRange();let n=Di(t);const i=Ni(n);if(!i)return!1;const s=new Set;for(;!t.collapsed&&null!=n;){if(Bi(n))return!0;null!=n&&t.setStartAfter(n),n=ui.forwardTraverse(i,s),mi()}return!1},Fi=(e,t)=>{if(e.nodeType!==Node.TEXT_NODE)return-1;const n=null!=t?t:e.data.length;if(n<e.data.length&&ui.BOUNDARY_CHARS.test(e.data[n]))return n;const i=e.data.substring(0,n),s=Ai(i).search(ui.BOUNDARY_CHARS);return-1!==s?n-s:-1},Ti=(e,t)=>{if(e.nodeType!==Node.TEXT_NODE)return-1;const n=null!=t?t:0;if(n<e.data.length&&n>0&&ui.BOUNDARY_CHARS.test(e.data[n-1]))return n;const i=e.data.substring(n).search(ui.BOUNDARY_CHARS);return-1!==i?n+i:-1},Ni=(e,t)=>{if(!e)return;let n=e;const i=null!=t?t:e;for(;!n.contains(i)||!Bi(n);)n.parentNode&&(n=n.parentNode);const s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,(e=>ui.acceptNodeIfVisibleInRange(e)));return s.currentNode=e,s},Oi=e=>{const t=ui.makeNewSegmenter();if(t){const n=Di(e);n!==e.startContainer&&e.setStartBefore(n),$i(t,!1,e)}else{const t=Fi(e.startContainer,e.startOffset);if(-1!==t)return void e.setStart(e.startContainer,t);if(Bi(e.startContainer)&&0===e.startOffset)return;const n=Ni(e.startContainer);if(!n)return;const i=new Set;let s=ui.backwardTraverse(n,i);for(;null!=s;){const t=Fi(s);if(-1!==t)return void e.setStart(s,t);if(Bi(s))return void(s.contains(e.startContainer)?e.setStart(s,0):e.setStartAfter(s));s=ui.backwardTraverse(n,i),e.collapse()}}},ki=e=>{const t=(e=>{const t=Di(e);if(Pi(t)&&ui.isNodeVisible(t))return t;const n=ui.makeTextNodeWalker(e);return n.currentNode=t,n.nextNode()})(e);if(null==t)return void e.collapse();Di(e)!==t&&e.setStart(t,0);const n=xi(e),i=(e=>{const t=xi(e);if(Pi(t)&&ui.isNodeVisible(t))return t;const n=ui.makeTextNodeWalker(e);return n.currentNode=t,ui.backwardTraverse(n,new Set)})(e);n!==i&&e.setEnd(i,i.textContent.length)},$i=(e,t,n)=>{const i=t?{node:n.endContainer,offset:n.endOffset}:{node:n.startContainer,offset:n.startOffset},s=Ri(i.node),o=s.preNodes.reduce(((e,t)=>e.concat(t.textContent)),""),r=s.innerNodes.reduce(((e,t)=>e.concat(t.textContent)),"");let a=o.length;i.node.nodeType===Node.TEXT_NODE?a+=i.offset:t&&(a+=r.length);const u=s.postNodes.reduce(((e,t)=>e.concat(t.textContent)),""),l=[...s.preNodes,...s.innerNodes,...s.postNodes];if(0==l.length)return;const c=o.concat(r,u),d=e.segment(c).containing(a);if(!d)return void(t?n.setEndAfter(l[l.length-1]):n.setEndBefore(l[0]));if(!d.isWordLike)return;if(a===d.index||a===d.index+d.segment.length)return;const h=t?d.index+d.segment.length:d.index;let f=0;for(const e of l){if(f<=h&&h<f+e.textContent.length){const i=h-f;return void(t?i>=e.textContent.length?n.setEndAfter(e):n.setEnd(e,i):i>=e.textContent.length?n.setStartAfter(e):n.setStart(e,i))}f+=e.textContent.length}t?n.setEndAfter(l[l.length-1]):n.setStartBefore(l[0])},Ri=e=>{const t=[],n=Ni(e);if(!n)return;const i=new Set;let s=ui.backwardTraverse(n,i);for(;null!=s&&!Bi(s);)mi(),s.nodeType===Node.TEXT_NODE&&t.push(s),s=ui.backwardTraverse(n,i);t.reverse();const o=[];if(e.nodeType===Node.TEXT_NODE)o.push(e);else{const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,(e=>ui.acceptNodeIfVisibleInRange(e)));t.currentNode=e;let n=t.nextNode();for(;null!=n;)mi(),n.nodeType===Node.TEXT_NODE&&o.push(n),n=t.nextNode()}const r=[],a=Ni(e);if(!a)return;const u=new Set([e]);let l=ui.forwardTraverse(a,u);for(;null!=l&&!Bi(l);)mi(),l.nodeType===Node.TEXT_NODE&&r.push(l),l=ui.forwardTraverse(a,u);return{preNodes:t,innerNodes:o,postNodes:r}},Li=e=>{const t=ui.makeNewSegmenter();if(t){const n=xi(e);n!==e.endContainer&&e.setEndAfter(n),$i(t,!0,e)}else{let t=e.endOffset,n=e.endContainer;n.nodeType===Node.ELEMENT_NODE&&e.endOffset<n.childNodes.length&&(n=n.childNodes[e.endOffset]);const i=Ni(n);if(!i)return;const s=new Set([n]);for(;null!=n;){mi();const o=Ti(n,t);if(t=null,-1!==o)return void e.setEnd(n,o);if(Bi(n))return void(n.contains(e.endContainer)?e.setEnd(n,n.childNodes.length):e.setEndBefore(n));n=ui.forwardTraverse(i,s)}e.collapse()}},Bi=e=>e.nodeType===Node.ELEMENT_NODE&&(ui.BLOCK_ELEMENTS.includes(e.tagName)||"HTML"===e.tagName||"BODY"===e.tagName),Pi=e=>e.nodeType===Node.TEXT_NODE;"undefined"!=typeof goog&&goog.declareModuleId("googleChromeLabs.textFragmentPolyfill.fragmentGenerationUtils");const Mi=["text"],Ii=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","BR","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL","TR","TH","TD","COLGROUP","COL","CAPTION","THEAD","TBODY","TFOOT"],Hi=/[\t-\r -#%-\*,-\/:;\?@\[-\]_\{\}\x85\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/u,Ui=e=>{const t=/^(?:(.+?)-,)?(?:(.+?))(?:,([^-]+?))?(?:,-(.+?))?$/;return{prefix:decodeURIComponent(e.replace(t,"$1")),textStart:decodeURIComponent(e.replace(t,"$2")),textEnd:decodeURIComponent(e.replace(t,"$3")),suffix:decodeURIComponent(e.replace(t,"$4"))}},ji={NO_SUFFIX_MATCH:0,SUFFIX_MATCH:1,MISPLACED_SUFFIX:2},qi=(e,t,n,i)=>{const s=i.createRange();s.setStart(t.endContainer,t.endOffset),s.setEnd(n.endContainer,n.endOffset),Wi(s);const o=Zi(e,s);return null==o?ji.NO_SUFFIX_MATCH:0!==o.compareBoundaryPoints(Range.START_TO_START,s)?ji.MISPLACED_SUFFIX:ji.SUFFIX_MATCH},Xi=(e,t,n)=>{try{e.setStart(t,n+1)}catch(n){e.setStartAfter(t)}},Wi=e=>{const t=zi(e);let n=t.nextNode();for(;!e.collapsed&&null!=n;){if(n!==e.startContainer&&e.setStart(n,0),n.textContent.length>e.startOffset){if(!n.textContent[e.startOffset].match(/\s/))return}try{e.setStart(n,e.startOffset+1)}catch(i){n=t.nextNode(),null==n?e.collapse():e.setStart(n,0)}}},zi=e=>document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(t=>Vi(t,e))),Yi=e=>{let t=e;for(;null!=t&&!(t instanceof HTMLElement);)t=t.parentNode;if(null!=t){const e=window.getComputedStyle(t);if("hidden"===e.visibility||"none"===e.display||0===e.height||0===e.width||0===e.opacity)return!1}return!0},Vi=(e,t)=>(null==t||t.intersectsNode(e))&&Yi(e)?e.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT,Gi=(e,t)=>{const n=[];let i=[];const s=Array.from(function*(e,t){const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:t}),i=new Set;for(;null!==ns(n,i);)yield n.currentNode}(e,(e=>"katex-mathml"!==e.className&&((e,t)=>(null==t||t.intersectsNode(e))&&Yi(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT)(e,t))));for(const e of s)e.nodeType===Node.TEXT_NODE?i.push(e):e instanceof HTMLElement&&Ii.includes(e.tagName)&&i.length>0&&(n.push(i),i=[]);return i.length>0&&n.push(i),n};const Zi=(e,t)=>{const n=Gi(t.commonAncestorContainer,t),i=ts();for(const s of n){const n=Ki(e,t,s,i);if(void 0!==n)return n}},Ki=(e,t,n,i)=>{if(!e||!t||!(n||[]).length)return;const s=es(((e,t,n)=>{let i="";return i=1===e.length?e[0].textContent.substring(t,n):e[0].textContent.substring(t)+e.slice(1,-1).reduce(((e,t)=>e+t.textContent),"")+e.slice(-1)[0].textContent.substring(0,n),i.replace(/[\t\n\r ]+/g," ")})(n,0,void 0)),o=es(e);let r,a,u=n[0]===t.startNode?t.startOffset:0;for(;u<s.length;){const e=s.indexOf(o,u);if(-1===e)return;if(Qi(s,e,o.length,i)&&(r=Ji(e,n,!1),a=Ji(e+o.length,n,!0)),null!=r&&null!=a){const e=new Range;if(e.setStart(r.node,r.offset),e.setEnd(a.node,a.offset),t.compareBoundaryPoints(Range.START_TO_START,e)<=0&&t.compareBoundaryPoints(Range.END_TO_END,e)>=0)return e}u=e+1}},Ji=(e,t,n)=>{let i,s=0;for(let o=0;o<t.length;o++){const r=t[o];i||(i=es(r.data));let a=s+i.length;if(n&&(a+=1),a>e){const t=e-s;let o=Math.min(e-s,r.data.length);const a=n?i.substring(0,t):i.substring(t);let u=es(n?r.data.substring(0,o):r.data.substring(o));const l=(n?-1:1)*(a.length>u.length?-1:1);for(;o>=0&&o<=r.data.length;){if(u.length===a.length)return{node:r,offset:o};o+=l,u=es(n?r.data.substring(0,o):r.data.substring(o))}}if(s+=i.length,o+1<t.length){const e=es(t[o+1].data);" "===i.slice(-1)&&" "===e.slice(0,1)&&(s-=1),i=e}}},Qi=(e,t,n,i)=>{if(t<0||t>=e.length||n<=0||t+n>e.length)return!1;if(i){const s=i.segment(e),o=s.containing(t);if(!o)return!1;if(o.isWordLike&&o.index!=t)return!1;const r=t+n,a=s.containing(r);if(a&&a.isWordLike&&a.index!=r)return!1}else{if(e[t].match(Hi)&&(++t,!--n))return!1;if(e[t+n-1].match(Hi)&&!--n)return!1;if(0!==t&&!e[t-1].match(Hi))return!1;if(t+n!==e.length&&!e[t+n].match(Hi))return!1}return!0},es=e=>(e||"").normalize("NFKD").replace(/\s+/g," ").replace(/[\u0300-\u036f]/g,"").toLowerCase(),ts=()=>{if(Intl.Segmenter){let e=document.documentElement.lang;return e||(e=navigator.languages),new Intl.Segmenter(e,{granularity:"word"})}},ns=(e,t)=>{if(!t.has(e.currentNode)){const t=e.firstChild();if(null!==t)return t}const n=e.nextSibling();if(null!==n)return n;const i=e.parentNode();return null!==i&&t.add(i),i};function is(e){let t=Object.assign({container:document.body,theme:"dark",useAlpha:!0,color:{r:250,g:250,b:68}},e),n=this,i={color_wheel:null,brightness_slider:null,tab_selection_buttons:null,red_input:null,green_input:null,blue_input:null,hue_input:null,saturation_input:null,brightness_input:null,hex_input:null,alpha_input:null},s={color_change:null,color_wheel_change:null,brightness_slider_change:null,tab_selection_change:null,hue_input_change:null,saturation_input_change:null,brightness_input_change:null,red_input_change:null,green_input_change:null,blue_input_change:null,alpha_input_change:null,hex_input_change:null},o={hsvToHsl:function(e,t,n){const i=(2-(t/=100))*(n/=100)/2;return 0!==i&&(t=1===i?0:i<.5?t*n/(2*i):t*n/(2-2*i)),[e,100*t,100*i]},hslToHsv:function(e,t,n){t/=100;const i=2*(t*=(n/=100)<.5?n:1-n)/(n+t)*100,s=100*(n+t);return[e,isNaN(i)?0:i,s]},hsvToRgb:function(e,t,n){e=e/360*6,t/=100,n/=100;const i=Math.floor(e),s=e-i,o=n*(1-t),r=n*(1-s*t),a=n*(1-(1-s)*t),u=i%6;return[255*[n,r,o,o,a,n][u],255*[a,n,n,r,o,o][u],255*[o,o,a,n,n,r][u]]},rgbToHsv:function(e,t,n){e/=255,t/=255,n/=255;const i=Math.min(e,t,n),s=Math.max(e,t,n),o=s-i;let r,a;if(0===o)r=a=0;else{a=o/s;const i=((s-e)/6+o/2)/o,u=((s-t)/6+o/2)/o,l=((s-n)/6+o/2)/o;e===s?r=l-u:t===s?r=1/3+i-l:n===s&&(r=2/3+u-i),r<0?r+=1:r>1&&(r-=1)}return[360*r,100*a,100*s]},hsvToHex:function(e,t,n){return o.hsvToRgb(e,t,n).map((e=>Math.round(e).toString(16).padStart(2,"0")))},hexToHsv:function(e){return e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,""),o.rgbToHsv(...e.match(/.{2}/g).map((e=>parseInt(e,16))))},hexToRgb:function(e){let t,n,i;return t=(e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,"")).charAt(0)+""+e.charAt(1),n=e.charAt(2)+""+e.charAt(3),i=e.charAt(4)+""+e.charAt(5),t=parseInt(t,16),n=parseInt(n,16),i=parseInt(i,16),[t,n,i]},getBoundingBox:function(e){let t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),width:t.width,height:t.height}},degreesToRadians:function(e){return e*(Math.PI/180)},countDecimals:function(e){return Math.floor(e.valueOf())===e.valueOf()?0:e.toString().split(".")[1].length||0},round:function(e,t){let n=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(n)?0:n}},r={open:[],change:[],close:[]};this.root=document.createElement("div"),this.container=t.container;let a=!0;Object.defineProperty(n,"isOpen",{get:function(){return a},set:function(e){null!=e&&(a=e,n.root.style.visibility=a?"visible":"collapse",l(a?"open":"close",n))},enumerable:!0,configurable:!0});let u=(new f).fromRGBa(t.color.r||255,t.color.g||255,t.color.b||255);Object.defineProperty(n,"color",{get:function(){return u},set:function(e){e instanceof f&&(u.dispose(),u=e,l("change",n.value))},enumerable:!0,configurable:!0});let l=function(e,...t){r[e].forEach((e=>e(...t,n)))};this.on=function(e,t){return r[e]=r[e]||[],r[e].push(t),this},this.off=function(e,t){const n=r[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this};let c=function(){n.root.innerHTML='\n            <div class="color-picker"> \n            <div class="color-picker-controls">\n                <div class="color-picker-controls-group" style="display: flex; flex-direction: row;height: 160px;">\n                    <div class="color-picker-brightness-control">\n                        <canvas id="brightness-canvas" class="brightness-canvas"></canvas>\n                        <div class="color-picker-brightness-control-thumb" style="bottom: 0; left: 50%;"></div>\n                    </div>\n                    <div class="color-picker-wheel-control">\n                        <canvas id="wheel-canvas" class="wheel-canvas"></canvas>\n                        <div class="color-picker-wheel-control-thumb" style="top:50%; left: 50%;"></div>\n                    </div>\n                </div>\n                <div class="color-picker-controls-group" style="flex: 1; padding-top: 0;">\n                    <div class="color-picker-input-controls">\n                        <div class="color-picker-input-controls-tab-headers">\n                            <button data-tab="rgb">RGB</button>\n                            <button data-tab="hsv" class="selected">HSV</button>\n                            <button data-tab="hex">HEX</button>\n                        </div>\n                        <div class="color-picker-input-controls-tabs">\n                            <div class="color-picker-input-controls-tab" data-tab="rgb">\n                                <div class="color-picker-red-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">R:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-green-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">G:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-blue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">B:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="color-picker-input-controls-tab selected" data-tab="hsv">\n                                <div class="color-picker-hue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="360">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">H:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-saturation-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">S:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-brightness-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">V:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="color-picker-input-controls-tab" data-tab="hex">\n                                <div class="color-picker-hex-input text-input-control" data-value="000000" data-is-alphanumeric="true">\n                                    <div class="text-input-enter-block">\n                                        <input class="text-input" type="text">\n                                    </div>\n                                    <div class="text-input-details-block">\n                                        <span class="text-input-label">Hex:</span>\n                                        <span class="text-input-value">000000</span>\n                                    </div>\n                                </div>\n                            </div>'+(t.useAlpha?'<div class="color-picker-alpha-input range-input-control" data-value="255" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">A:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>':"")+"</div>\n                    </div>\n                </div>\n            </div>\n        </div>".trim(),n.container.appendChild(n.root),n.root.dataset.theme=t.theme,n.isOpen=t.isOpen,i.color_wheel=new p({color_picker:n}),i.color_wheel.values.hue=n.color.h,i.color_wheel.values.saturation=n.color.s,i.brightness_slider=new g({color_picker:n}),i.brightness_slider.value=n.color.v,i.tab_selection_buttons=n.root.querySelectorAll(".color-picker-input-controls-tab-headers button"),i.red_input=new m(n.root.querySelector(".color-picker-red-input")),i.green_input=new m(n.root.querySelector(".color-picker-green-input")),i.blue_input=new m(n.root.querySelector(".color-picker-blue-input"));let e=o.hsvToRgb(n.color.h,n.color.s,n.color.v);i.red_input.value=e[0],i.green_input.value=e[1],i.blue_input.value=e[2],i.hue_input=new m(n.root.querySelector(".color-picker-hue-input")),i.hue_input.value=n.color.h,i.saturation_input=new m(n.root.querySelector(".color-picker-saturation-input")),i.saturation_input.value=n.color.s,i.brightness_input=new m(n.root.querySelector(".color-picker-brightness-input")),i.brightness_input.value=n.color.v,i.hex_input=new v(n.root.querySelector(".color-picker-hex-input"));let s=o.hsvToHex(n.color.h,n.color.s,n.color.v);i.hex_input.value=s.join("").toUpperCase(),t.useAlpha&&(i.alpha_input=new m(n.root.querySelector(".color-picker-alpha-input")),i.alpha_input.value=n.color.a),d()},d=function(){s.tab_selection_change=function(e){i.tab_selection_buttons.forEach((e=>e.classList.remove("selected"))),n.root.querySelectorAll(".color-picker-input-controls-tab").forEach((e=>e.classList.remove("selected"))),e.target.classList.add("selected"),n.root.querySelector('.color-picker-input-controls-tab[data-tab="'+e.target.dataset.tab+'"]').classList.add("selected")},i.tab_selection_buttons.forEach((e=>e.addEventListener("click",s.tab_selection_change))),s.color_change=()=>n.update(),n.color.on("change",s.color_change),s.color_wheel_change=function(e){n.color.h=e.hue,n.color.s=e.saturation,n.update(),l("change",n.color)},i.color_wheel.on("change",s.color_wheel_change),s.brightness_slider_change=function(e){n.color.v=e,n.update(),l("change",n.color)},i.brightness_slider.on("change",s.brightness_slider_change),s.hue_input_change=function(e){n.color.h=e,n.update(),l("change",n.color)},i.hue_input.on("change",s.hue_input_change),s.saturation_input_change=function(e){n.color.s=e,n.update(),l("change",n.color)},i.saturation_input.on("change",s.saturation_input_change),s.brightness_input_change=function(e){n.color.v=e,n.update(),l("change",n.color)},i.brightness_input.on("change",s.brightness_input_change),s.red_input_change=function(e){let t=o.rgbToHsv(i.red_input.value,i.green_input.value,i.blue_input.value);n.color.h=t[0],n.color.s=t[1],n.color.v=t[2],n.update(),l("change",n.color)},i.red_input.on("change",s.red_input_change),s.green_input_change=function(e){let t=o.rgbToHsv(i.red_input.value,i.green_input.value,i.blue_input.value);n.color.h=t[0],n.color.s=t[1],n.color.v=t[2],n.update(),l("change",n.color)},i.green_input.on("change",s.green_input_change),s.blue_input_change=function(e){let t=o.rgbToHsv(i.red_input.value,i.green_input.value,i.blue_input.value);n.color.h=t[0],n.color.s=t[1],n.color.v=t[2],n.update(),l("change",n.color)},i.blue_input.on("change",s.blue_input_change),s.hex_input_change=function(e){let t=i.hex_input.value.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,""),s=o.hexToHsv(t.padEnd(6,"0"));n.color.h=s[0]||0,n.color.s=s[1]||0,n.color.v=s[2]||0,n.update(),l("change",n.color)},i.hex_input.on("change",s.hex_input_change),t.useAlpha&&(s.alpha_input_change=function(e){n.color.a=e,n.update(),l("change",n.color)},i.alpha_input.on("change",s.alpha_input_change))},h=function(){i.tab_selection_buttons.forEach((e=>e.removeEventListener("click",s.tab_selection_change))),n.color.off("change",s.color_change),i.color_wheel.off("change",s.color_wheel_change),i.brightness_slider.off("change",s.brightness_slider_change),i.hue_input.off("change",s.hue_input_change),i.saturation_input.off("change",s.saturation_input_change),i.brightness_input.off("change",s.brightness_input_change),i.red_input.off("change",s.red_input_change),i.green_input.off("change",s.green_input_change),i.blue_input.off("change",s.blue_input_change),i.hex_input.off("change",s.hex_input_change),t.useAlpha&&i.alpha_input.off("change",s.alpha_input_change)};function f(e=360,t=0,i=100,s=255){this.h=e,this.s=t,this.v=i,this.a=s;let r={change:[]},a=function(e,...t){r[e].forEach((e=>e(...t,n)))};this.on=function(e,t){return r[e]=r[e]||[],r[e].push(t),this},this.off=function(e,t){const n=r[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this},this.fromHSVa=function(e=0,t=0,n=0,i=255){return this.h=e,this.s=t,this.v=n,this.a=i,a("change",this),this},this.toHSV=function(){let e=[this.h,this.s,this.v];var t,n;return e.toString=(t=e,n=e=>`hsv(${e[0]}, ${e[1]}%, ${e[2]}%)`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.toHSVa=function(){let e=[this.h,this.s,this.v,this.a];var t,n;return e.toString=(t=e,n=e=>`hsva(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.fromHSLa=function(e,t,n,i=255){let s=o.hslToHsv(e,t,n);return null!=s?(this.h=s[0]||0,this.s=s[1]||0,this.v=s[2]||0,this.a=i):console.error("Error while parsing hsl into hsv"),a("change",this),this},this.toHSL=function(){let e=[...o.hsvToHsl(this.h,this.s,this.v)];var t,n;return e.toString=(t=e,n=e=>`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.toHSLa=function(){let e=[...o.hsvToHsl(this.h,this.s,this.v),this.a];var t,n;return e.toString=(t=e,n=e=>`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.fromRGBa=function(e=0,t=0,n=0,i=255){let s=o.rgbToHsv(e,t,n);return null!=s?(this.h=s[0]||0,this.s=s[1]||0,this.v=s[2]||0,this.a=i):console.error("Error while parsing rgb into hsv"),a("change",this),this},this.toRGB=function(){let e=[...o.hsvToRgb(this.h,this.s,this.v)];var t,n;return e.toString=(t=e,n=e=>`rgb(${e[0]}, ${e[1]}, ${e[2]})`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.toRGBa=function(){let e=[...o.hsvToRgb(this.h,this.s,this.v),this.a];var t,n;return e.toString=(t=e,n=e=>`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${this.a})`,(e=-1)=>n(~e?t.map((t=>Number(t.toFixed(e)))):t)),e},this.fromHEX=function(e,t=255){e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,"");let n=o.hexToHsv(e.padEnd(6,"0"));return null!=n?(this.h=n[0]||0,this.s=n[1]||0,this.v=n[2]||0,this.a=t):console.error("Error while parsing hex into hsv"),a("change",this),this},this.toHEX=function(){return`#${o.hsvToHex(this.h,this.s,this.v).join("").toUpperCase()}`},this.dispose=function(){for(var e in r.change.splice(0,r.change.length),r.change=null,a=null,this)delete this[e]}}function p({color_picker:e=null}){let t,n=this,i=e.root.querySelector(".color-picker-wheel-control"),s=i.querySelector("canvas"),r=document.createElement("canvas"),a=i.querySelector(".color-picker-wheel-control-thumb"),u=!1,l={thumb_mousedown:null,canvas_mousedown:null,document_mousemove:null,document_mouseup:null},c={change:[]};this.values={};let d=e.color.h;Object.defineProperty(this.values,"hue",{get:function(){return d},set:function(e){null!=e&&(e>360&&(e=360),e<0&&(e=0),d=e,n.update())},enumerable:!0,configurable:!0});let h=e.color.s;Object.defineProperty(this.values,"saturation",{get:function(){return h},set:function(e){null!=e&&(e>100&&(e=100),e<0&&(e=0),h=e,n.update())},enumerable:!0,configurable:!0});let f=function(e,...t){c[e].forEach((e=>e(...t,n)))};this.on=function(e,t){return c[e]=c[e]||[],c[e].push(t),this},this.off=function(e,t){const n=c[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this};let p=async function(){await g(),m(),v(),_()},g=async function(){return new Promise(((e,n)=>{let i=document.createElement("canvas");i.width=i.height=512;let s=i.getContext("2d"),o=i.width/2,r=1/o;s.clearRect(0,0,i.width,i.height);let a=o,u=o;for(let e=0;e<360;e+=r){let t=e*(2*Math.PI)/360,n=o*Math.cos(t),i=o*Math.sin(t);s.strokeStyle="hsl("+e+", 100%, 50%)",s.beginPath(),s.moveTo(o,o),s.lineTo(a+n,u+i),s.stroke()}let l=s.createRadialGradient(a,u,0,a,a,o);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(1,"rgba(255, 255, 255, 0)"),s.fillStyle=l,s.beginPath(),s.arc(a,u,o,0,2*Math.PI,!0),s.closePath(),s.fill(),s.beginPath(),s.strokeStyle="rgb(38, 41, 50)",s.arc(a,u,o,0,2*Math.PI),s.stroke(),t=new Image,t.onload=()=>e(),t.src=i.toDataURL()}))},m=function(){let n=o.getBoundingBox(s);s.width=s.height=n.width,r.width=r.height=n.width;let i=s.getContext("2d"),a=r.getContext("2d");i.translate(s.width/2,s.height/2),i.rotate(90*Math.PI/180),i.translate(-s.width/2,-s.height/2),i.beginPath(),i.arc(s.width/2,s.width/2,s.width/2,0,2*Math.PI),i.clip(),i.closePath();let u=document.createElement("canvas"),l=10;u.width=20,u.height=20;let c=u.getContext("2d"),d="rgba(255, 255, 255, 1)",h="rgba(205, 205,205, 1)";c.beginPath(),c.fillStyle=d,c.fillRect(0,0,l,l),c.closePath(),c.beginPath(),c.fillStyle=h,c.fillRect(l,0,l,l),c.closePath(),c.beginPath(),c.fillStyle=h,c.fillRect(0,l,l,l),c.closePath(),c.beginPath(),c.fillStyle=d,c.fillRect(l,l,l,l),c.closePath();let f=i.createPattern(u,"repeat");i.beginPath(),i.fillStyle=f,i.fillRect(0,0,s.width,s.height),i.closePath(),i.beginPath(),i.strokeStyle="rgb(217, 214, 205)",i.arc(s.width/2,s.width/2,s.width/2,0,2*Math.PI),i.stroke(),i.closePath(),a.drawImage(t,0,0,s.width,s.height),a.fillStyle="rgba(0, 0, 0, "+Math.abs(1-e.color.v/100)+")",a.fillRect(0,0,s.width,s.height),i.globalAlpha=e.color.a/255,i.drawImage(r,0,0,s.width,s.height)},v=function(){let t=o.getBoundingBox(s),n=o.getBoundingBox(a);a.style.backgroundColor=e.color.toRGB().toString(),u||(a.style.left=t.width/2+t.width/2/100*e.color.s*Math.cos(o.degreesToRadians(e.color.h+90))-n.width/2+"px",a.style.top=t.height/2+t.width/2/100*e.color.s*Math.sin(o.degreesToRadians(e.color.h+90))-n.height/2+"px"),a.dataset.value1=e.color.h,a.dataset.value2=e.color.s},_=function(){l.thumb_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),u=!0},a.addEventListener("mousedown",l.thumb_mousedown,!0),a.addEventListener("touchstart",l.thumb_mousedown,!0),l.canvas_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),u=!0;let t=e.touches?e.touches[0].pageX:e.pageX,i=e.touches?e.touches[0].pageY:e.pageY,r=o.getBoundingBox(s),l=o.getBoundingBox(a),c=r.width/2,d=t,h=i,p=r.left+r.width/2,g=r.top+r.height/2,m=360*Math.atan2(h-g,d-p)/(2*Math.PI)-90;m<0&&(m+=360),Math.sqrt((d-p)*(d-p)+(h-g)*(h-g))>c?(a.style.left=r.width/2+c*Math.cos(o.degreesToRadians(m+90))-l.width/2+"px",a.style.top=r.height/2+c*Math.sin(o.degreesToRadians(m+90))-l.height/2+"px"):(a.style.left=t-r.left-l.width/2+"px",a.style.top=i-r.top-l.height/2+"px"),r=o.getBoundingBox(s),l=o.getBoundingBox(a);let v=r.left+r.width/2-(l.left+l.width/2),_=r.top+r.height/2-(l.top+l.height/2),b=Math.sqrt(Math.pow(v,2)+Math.pow(_,2)),w=m,E=Math.min(100,Math.ceil(b/c*100));n.values.hue=w,n.values.saturation=E,a.dataset.value1=w,a.dataset.value2=E,f("change",n.values)},s.addEventListener("mousedown",l.canvas_mousedown,!0),s.addEventListener("touchstart",l.canvas_mousedown,!0),l.document_mousemove=function(e){if(u){e.preventDefault(),e.stopImmediatePropagation();let t=e.touches?e.touches[0].pageX:e.pageX,i=e.touches?e.touches[0].pageY:e.pageY,r=o.getBoundingBox(s),u=o.getBoundingBox(a),l=r.width/2,c=t,d=i,h=r.left+r.width/2,p=r.top+r.height/2,g=360*Math.atan2(d-p,c-h)/(2*Math.PI)-90;g<0&&(g+=360),Math.sqrt((c-h)*(c-h)+(d-p)*(d-p))>l?(a.style.left=r.width/2+l*Math.cos(o.degreesToRadians(g+90))-u.width/2+"px",a.style.top=r.height/2+l*Math.sin(o.degreesToRadians(g+90))-u.height/2+"px"):(a.style.left=t-r.left-u.width/2+"px",a.style.top=i-r.top-u.height/2+"px"),r=o.getBoundingBox(s),u=o.getBoundingBox(a);let m=r.left+r.width/2-(u.left+u.width/2),v=r.top+r.height/2-(u.top+u.height/2),_=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),b=g,w=Math.min(100,Math.ceil(_/l*100));n.values.hue=b,n.values.saturation=w,a.dataset.value1=b,a.dataset.value2=w,f("change",n.values)}},document.addEventListener("mousemove",l.document_mousemove,!0),document.addEventListener("touchmove",l.document_mousemove,{passive:!1}),l.document_mouseup=function(e){u=!1},document.addEventListener("mouseup",l.document_mouseup,!0),document.addEventListener("touchend",l.document_mouseup,!0)},b=function(){a.removeEventListener("mousedown",l.thumb_mousedown,!1),a.removeEventListener("touchstart",l.thumb_mousedown,!1),s.removeEventListener("mousedown",l.canvas_mousedown,!1),s.removeEventListener("touchstart",l.canvas_mousedown,!1),document.removeEventListener("mousemove",l.document_mousemove,!1),document.removeEventListener("touchmove",l.document_mousemove,!1),document.removeEventListener("mouseup",l.document_mouseup,!1),document.removeEventListener("touchend",l.document_mouseup,!1)};this.update=function(e){m(),v()},this.dispose=function(){for(var e in b(),this.values=null,d=null,h=null,l.thumb_mousedown=null,l.canvas_mousedown=null,l.document_mousemove=null,l.document_mouseup=null,c.change.splice(0,c.change.length),c.change=null,n=null,i=null,s=null,r=null,a=null,u=null,t=null,l=null,c=null,f=null,p=null,g=null,m=null,v=null,_=null,b=null,this)delete this[e]},p()}function g({color_picker:e=null}){let t=this,n=e.root.querySelector(".color-picker-brightness-control"),i=n.querySelector("canvas"),s=n.querySelector(".color-picker-brightness-control-thumb"),r=!1,a={thumb_mousedown:null,canvas_mousedown:null,document_mousemove:null,document_mouseup:null},u={change:[]},l=e.color.v;Object.defineProperty(t,"value",{get:function(){return l},set:function(e){null!=e&&(e>100&&(e=100),e<0&&(e=0),l=e,t.update())},enumerable:!0,configurable:!0});let c=function(e,...n){u[e].forEach((e=>e(...n,t)))};this.on=function(e,t){return u[e]=u[e]||[],u[e].push(t),this},this.off=function(e,t){const n=u[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this};let d=function(){h(),f(),p()},h=function(){let t=o.getBoundingBox(i);i.width=t.width,i.height=t.height;let n=i.getContext("2d").createLinearGradient(0,0,0,i.height),s=o.hsvToRgb(e.color.h,e.color.s,100),r=[0,0,0];n.addColorStop(0,"rgb("+s[0]+","+s[1]+","+s[2]+")"),n.addColorStop(1,"rgb("+r[0]+","+r[1]+","+r[2]+")"),i.getContext("2d").fillStyle=n,i.getContext("2d").fillRect(0,0,i.width,i.height)},f=function(){let n=o.getBoundingBox(i),a=o.getBoundingBox(s);s.style.backgroundColor=e.color.toRGB().toString(),s.style.left=n.width/2-a.width/2+"px",r||(s.style.top=-a.height/2+n.height*((100-t.value)/100)+"px"),s.dataset.value=t.value},p=function(){a.thumb_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),r=!0},s.addEventListener("mousedown",a.thumb_mousedown,!0),s.addEventListener("touchstart",a.thumb_mousedown,!0),a.canvas_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),r=!0;let n=e.touches?e.touches[0].pageY:e.pageY,a=o.getBoundingBox(i),u=o.getBoundingBox(s);s.style.left=a.width/2-u.width/2+"px",a.top<=n+u.height/2&&n+u.height/2<=a.top+a.height?s.style.top=n-a.top+"px":a.top>n+u.height/2?s.style.top=-u.height/2+"px":s.style.top=a.height-u.height/2+"px",a=o.getBoundingBox(i),u=o.getBoundingBox(s);let l=100-(u.top+u.height/2-a.top)/a.height*100;t.value=l,s.dataset.value=l,c("change",t.value)},i.addEventListener("mousedown",a.canvas_mousedown,!0),i.addEventListener("touchstart",a.canvas_mousedown,!0),a.document_mousemove=function(e){if(r){e.preventDefault(),e.stopImmediatePropagation();let n=e.touches?e.touches[0].pageY:e.pageY,r=o.getBoundingBox(i),a=o.getBoundingBox(s);s.style.left=r.width/2-a.width/2+"px",r.top<=n+a.height/2&&n+a.height/2<=r.top+r.height?s.style.top=n-r.top+"px":r.top>n+a.height/2?s.style.top=-a.height/2+"px":s.style.top=r.height-a.height/2+"px",r=o.getBoundingBox(i),a=o.getBoundingBox(s);let u=100-(a.top+a.height/2-r.top)/r.height*100;t.value=u,s.dataset.value=u,c("change",t.value)}},document.addEventListener("mousemove",a.document_mousemove,!0),document.addEventListener("touchmove",a.document_mousemove,{passive:!1}),a.document_mouseup=function(e){r=!1},document.addEventListener("mouseup",a.document_mouseup,!0),document.addEventListener("touchend",a.document_mouseup,!0)},g=function(){s.removeEventListener("mousedown",a.thumb_mousedown,!1),s.removeEventListener("touchstart",a.thumb_mousedown,!1),i.removeEventListener("mousedown",a.canvas_mousedown,!1),i.removeEventListener("touchstart",a.canvas_mousedown,!1),document.removeEventListener("mousemove",a.document_mousemove,!1),document.removeEventListener("touchmove",a.document_mousemove,!1),document.removeEventListener("mouseup",a.document_mouseup,!1),document.removeEventListener("touchend",a.document_mouseup,!1)};this.update=function(e){h(),f()},this.dispose=function(){for(var e in g(),this.value=null,l=null,a.thumb_mousedown=null,a.canvas_mousedown=null,a.document_mousemove=null,a.document_mouseup=null,u.change.splice(0,u.change.length),u.change=null,t=null,n=null,i=null,s=null,r=null,a=null,u=null,c=null,d=null,h=null,f=null,p=null,g=null,this)delete this[e]},d()}function m(e){this.root=e,this.min=Number(e.dataset.min),this.max=Number(e.dataset.max),this.step=Number(e.dataset.step)||1;let t=this,n=e.querySelector(".range-input"),i=e.querySelector(".range-input-progress"),s=e.querySelector(".range-input-value"),r=document.createElement("div"),a=!1,u=!1,l=null,c={root_mousedown:null,input_focusout:null,input_keyup:null},d={focus:[],blur:[],change:[]},h=Number(e.dataset.value)||0;Object.defineProperty(t,"value",{get:function(){return h},set:function(e){null!=e&&(null!=t.max&&e>t.max&&(e=t.max),null!=t.min&&e<t.min&&(e=t.min),h=o.round(Number(e),o.countDecimals(t.step)),n.value=h,s.innerHTML=h,null!=t.max&&(i.style.width=h/t.max*100+"%"),p("change",t.value))},enumerable:!0,configurable:!0});let f=!1;Object.defineProperty(t,"isFocused",{get:function(){return f},set:function(e){null!=e&&(f=e,f?(t.root.classList.add("range-input-control--focused"),p("focus",t)):(p("blur",t),t.root.classList.remove("range-input-control--focused")))},enumerable:!0,configurable:!0});let p=function(e,...n){d[e].forEach((e=>e(...n,t)))};this.on=function(e,t){return d[e]=d[e]||[],d[e].push(t),this},this.off=function(e,t){const n=d[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this};let g=function(){n.value=t.value,s.innerHTML=Number(t.value).toFixed(o.countDecimals(t.step)),null!=t.max&&(i.style.width=t.value/t.max*100%NaN),m()},m=function(){c.root_mousedown=function(e){if(e.stopPropagation(),t.root.classList.contains("range-input-control--disabled")||t.root.classList.contains("range-input-control--mouse-move-mode")||t.root.classList.contains("range-input-control--key-input-mode"))return;t.isFocused=!0;let i=e.touches?e.touches[0].pageX:e.pageX;e.touches?e.touches[0].pageY:e.pageY,a=!0,u=!0,l=i,document.body.appendChild(r),r.focus(),t.root.classList.contains("range-input-control--mouse-move-mode")||t.root.classList.add("range-input-control--mouse-move-mode");let s=t.root.getBoundingClientRect(),o=function(e){if(!u)return;a=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();let n=e.touches?e.touches[0].pageX:e.pageX;e.touches?e.touches[0].pageY:e.pageY;let i=(n-l)/s.width*(t.max-t.min);0==n?t.value=t.value-t.step:n==window.screen.width-1?t.value=t.value+t.step:t.value=t.value+i,l=n},c=function(e){u&&(u=!1,t.root.classList.contains("range-input-control--mouse-move-mode")&&t.root.classList.remove("range-input-control--mouse-move-mode"),null!=r&&null!=r.parentNode&&document.body.removeChild(r)),a?(t.root.classList.contains("range-input-control--key-input-mode")||t.root.classList.add("range-input-control--key-input-mode"),n.focus(),n.select()):t.isFocused=!1,document.removeEventListener("mouseup",c,!1),document.removeEventListener("touchend",c,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("touchmove",o,!1)};document.addEventListener("mouseup",c,{once:!0}),document.addEventListener("touchend",c,{once:!0}),document.addEventListener("mousemove",o,{passive:!1}),document.addEventListener("touchmove",o,{passive:!1})},t.root.addEventListener("mousedown",c.root_mousedown,!0),t.root.addEventListener("touchstart",c.root_mousedown,!0),c.input_focusout=function(e){t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),this.value=t.value,t.isFocused=!1},n.addEventListener("focusout",c.input_focusout),c.input_keyup=function(e){27===e.keyCode&&(e.preventDefault(),t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),this.value=t.value,t.isFocused=!1),13===e.keyCode&&(e.preventDefault(),t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),t.value=this.value,t.isFocused=!1)},n.addEventListener("keyup",c.input_keyup)},v=function(){t.root.removeEventListener("mousedown",c.root_mousedown,!1),t.root.removeEventListener("touchstart",c.root_mousedown,!1),n.removeEventListener("focusout",c.input_focusout,!1),n.removeEventListener("keyup",c.input_keyup,!1)};this.dispose=function(){for(var e in v(),this.value=null,h=null,this.isFocused=null,f=null,this.min=null,this.max=null,this.step=null,this.root.parentNode.removeChild(this.root),this.root=null,c.root_mousedown=null,c.input_focusout=null,c.input_keyup=null,d.focus.splice(0,d.focus.length),d.focus=null,d.blur.splice(0,d.blur.length),d.blur=null,d.change.splice(0,d.change.length),d.change=null,d=null,t=null,n=null,i=null,s=null,r=null,a=null,u=null,l=null,c=null,d=null,p=null,g=null,m=null,v=null,this)delete this[e]},g()}function v(e){this.root=e,this.isAlphanumeric=e.dataset.isAlphanumeric||!1;let t=this,n=e.querySelector(".text-input"),i=e.querySelector(".text-input-value"),s={root_mousedown:null,input_focusout:null,input_keydown:null,input_keyup:null},o={focus:[],blur:[],change:[]},r=e.dataset.value||"";Object.defineProperty(t,"value",{get:function(){return r},set:function(e){null!=e&&(r=e,n.value=r,i.innerHTML=r,u("change",t.value))},enumerable:!0,configurable:!0});let a=!1;Object.defineProperty(t,"isFocused",{get:function(){return a},set:function(e){null!=e&&(a=e,a?(t.root.classList.add("text-input-control--focused"),u("focus",t)):(u("blur",t),t.root.classList.remove("text-input-control--focused")))},enumerable:!0,configurable:!0});let u=function(e,...n){o[e].forEach((e=>e(...n,t)))};this.on=function(e,t){return o[e]=o[e]||[],o[e].push(t),this},this.off=function(e,t){const n=o[e]||[],i=n.indexOf(t);return~i&&n.splice(i,1),this};let l=function(){n.value=t.value,i.innerHTML=t.value,c()},c=function(){s.root_mousedown=function(e){if(e.stopPropagation(),t.root.classList.contains("text-input-control--disabled"))return;t.isFocused=!0;let i=function(e){n.focus(),n.select()};document.addEventListener("mouseup",i,{once:!0}),document.addEventListener("touchend",i,{once:!0})},t.root.addEventListener("mousedown",s.root_mousedown,!0),t.root.addEventListener("touchstart",s.root_mousedown,!0),s.input_focusout=function(e){this.value=t.value,t.isFocused=!1},n.addEventListener("focusout",s.input_focusout,!0),s.input_keydown=function(e){let n=e.keyCode||e.charCode;t.isAlphanumeric&&(!e.key.match(/[a-zA-Z0-9]/)||0==document.getSelection().toString().length&&37!==n&&39!==n&&6==this.value.length&&8!=n&&46!=n)&&e.preventDefault()},n.addEventListener("keydown",s.input_keydown,!0),s.input_keyup=function(e){27===e.keyCode&&(e.preventDefault(),this.value=t.value,t.isFocused=!1),13===e.keyCode&&(e.preventDefault(),t.value=this.value,t.isFocused=!1)},n.addEventListener("keyup",s.input_keyup,!0)},d=function(){t.root.removeEventListener("mousedown",s.root_mousedown,!1),t.root.removeEventListener("touchstart",s.root_mousedown,!1),n.removeEventListener("focusout",s.input_focusout,!1),n.removeEventListener("keydown",s.input_keydown,!1),n.removeEventListener("keyup",s.input_keyup,!1)};this.dispose=function(){for(var e in d(),this.value=null,r=null,this.isFocused=null,a=null,this.isAlphanumeric=null,this.root.parentNode.removeChild(this.root),this.root=null,s.root_mousedown=null,s.input_focusout=null,s.input_keydown=null,s.input_keyup=null,o.focus.splice(0,o.focus.length),o.focus=null,o.blur.splice(0,o.blur.length),o.blur=null,o.change.splice(0,o.change.length),o.change=null,o=null,t=null,n=null,i=null,s=null,o=null,u=null,l=null,c=null,d=null,this)delete this[e]},l()}this.open=()=>this.isOpen=!0,this.close=()=>this.isOpen=!1,this.update=function(){h(),i.color_wheel.values.hue=n.color.h,i.color_wheel.values.saturation=n.color.s,i.brightness_slider.value=n.color.v,i.hue_input.value=n.color.h,i.saturation_input.value=n.color.s,i.brightness_input.value=n.color.v;let e=o.hsvToRgb(n.color.h,n.color.s,n.color.v);i.red_input.value=e[0],i.green_input.value=e[1],i.blue_input.value=e[2];let s=o.hsvToHex(n.color.h,n.color.s,n.color.v);i.hex_input.value=s.join("").toUpperCase(),t.useAlpha&&(i.alpha_input.value=n.color.a),d()},this.dispose=function(){for(var e in h(),this.isOpen=null,a=null,this.color.dispose(),this.color=null,u=null,this.root.parentNode.removeChild(this.root),this.root=null,this.container=null,s.color_change=null,s.tab_selection_change=null,s.color_wheel_change=null,s.brightness_slider_change=null,s.hue_input_change=null,s.saturation_input_change=null,s.brightness_input_change=null,s.red_input_change=null,s.green_input_change=null,s.blue_input_change=null,s.alpha_input_change=null,s.hex_input_change=null,r.open.splice(0,r.open.length),r.open=null,r.change.splice(0,r.change.length),r.change=null,r.close.splice(0,r.close.length),r.close=null,i.color_wheel.dispose(),i.color_wheel=null,i.brightness_slider.dispose(),i.brightness_slider=null,i.tab_selection_buttons=null,i.red_input.dispose(),i.red_input=null,i.green_input.dispose(),i.green_input=null,i.blue_input.dispose(),i.blue_input=null,i.hue_input.dispose(),i.hue_input=null,i.saturation_input.dispose(),i.saturation_input=null,i.brightness_input.dispose(),i.brightness_input=null,i.hex_input.dispose(),i.hex_input=null,t.useAlpha&&i.alpha_input.dispose(),i.alpha_input=null,t=null,n=null,i=null,s=null,r=null,o=null,l=null,c=null,d=null,h=null,this)delete this[e]},c()}"undefined"!=typeof goog&&goog.declareModuleId("googleChromeLabs.textFragmentPolyfill.textFragmentUtils");async function ss(){return(await async function(){const e=await fetch("http://attu3.cs.washington.edu:2976/search/vishald.com%2Fliving-highlights");return(await e.json()).tweets}()).reverse()}let os=0;function rs(e){return((e,t=document)=>{const n=[],i=t.createRange();for(i.selectNodeContents(t.body);!i.collapsed&&n.length<2;){let s;if(e.prefix){const n=Zi(e.prefix,i);if(null==n)break;Xi(i,n.startContainer,n.startOffset);const o=t.createRange();if(o.setStart(n.endContainer,n.endOffset),o.setEnd(i.endContainer,i.endOffset),Wi(o),o.collapsed)break;if(s=Zi(e.textStart,o),null==s)break;if(0!==s.compareBoundaryPoints(Range.START_TO_START,o))continue}else{if(s=Zi(e.textStart,i),null==s)break;Xi(i,s.startContainer,s.startOffset)}if(e.textEnd){const o=t.createRange();o.setStart(s.endContainer,s.endOffset),o.setEnd(i.endContainer,i.endOffset);let r=!1;for(;!o.collapsed&&n.length<2;){const a=Zi(e.textEnd,o);if(null==a)break;if(Xi(o,a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset),e.suffix){const o=qi(e.suffix,s,i,t);if(o===ji.NO_SUFFIX_MATCH)break;if(o===ji.SUFFIX_MATCH){r=!0,n.push(s.cloneRange());continue}if(o===ji.MISPLACED_SUFFIX)continue}else r=!0,n.push(s.cloneRange())}if(!r)break}else if(e.suffix){const o=qi(e.suffix,s,i,t);if(o===ji.NO_SUFFIX_MATCH)break;if(o===ji.SUFFIX_MATCH){n.push(s.cloneRange()),Xi(i,i.startContainer,i.startOffset);continue}if(o===ji.MISPLACED_SUFFIX)continue}else n.push(s.cloneRange())}return n})((e=>{const t={};for(const[n,i]of Object.entries(e))Mi.includes(n)&&(t[n]=i.map((e=>Ui(e))));return t})((e=>{const t=e.replace(/#.*?:~:(.*?)/,"$1").split(/&?text=/).filter(Boolean);return t.length?{text:t}:{}})(e)).text[0])[0]}function as(e){let t,n,i=Gi(e.commonAncestorContainer,e).flat(1),s=0!==i.length?i.map((e=>e.textContent)).join(""):e.startContainer.textContent,o=s.lastIndexOf(" ",e.startOffset),r=-1!==o?o:0;if(0===i.length)t=s.slice(e.endOffset).indexOf(" "),n=e.endOffset+(-1!==t?t:0);else{let o=i[i.length-1].length,r=s.length-o+e.endOffset;t=s.slice(r).indexOf(" "),n=r+(-1!==t?t:o)}return s.slice(r,n)}function us({parent:e,link:t,username:n,threadText:i,threadDate:s,threadComment:o=null}){const r=document.createElement("div");r.classList.add("thread"),r.classList.add("type-tweet");let a=$`<div class="thread-info"><div class="thread-username"><a href="${t}" target="_blank">${n}</a></div><div class="thread-type">Tweet</div></div><div class="thread-body"><div class="thread-text">${i}</div><div class="thread-comment">${Ne(function(e){let t,n,i,s;return n=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,t=e.replace(n,'<a href="$1" target="_blank">$1</a>'),i=/(^|[^\/])(www\.[\S]+(\b|$))/gim,t=t.replace(i,'$1<a href="http://$2" target="_blank">$2</a>'),s=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,t=t.replace(s,'<a href="mailto:$1">$1</a>'),t}(o))}</div></div><div class="thread-datetime">${s.toLocaleString()}</div>`;return e.insertBefore(r,e.firstChild),Z(a,r),r}window.customElements.define("cite-ref",class extends te{static get properties(){return{key:{type:String},mode:{type:String},index:{type:Number},data:{type:Object}}}constructor(){super(),this.mode="citation",this.addEventListener("keydown",this.keyDown),this.addEventListener("mousedown",this.openCitation),this.addEventListener("focusout",this.focusOut)}focusOut(e){this.contains(e.relatedTarget)||this.closeCitation()}keyDown(e){"Enter"==e.key?this.openCitation():"Escape"==e.key&&this.closeCitation()}closeCitation(){for(const e of this.querySelector(".cite-ref").children)e.style.display="none"}openCitation(){for(const e of this.querySelector(".cite-ref").children)e.style.display="inline-block"}toggleContent(e){if(!window.getSelection().toString()){const t=e.target.querySelector("summary");e.target.open?t.textContent=t.getAttribute("data-longtext"):t.textContent=t.getAttribute("data-shorttext")}}initialChildNodes(e){this.__prefix=e[0],this.__suffix=e[1]}render(){const{key:e,data:t,index:n,mode:i}=this,s=$`<div class="cite-info-wrapper"></div>`;if(null==t)return $`<span class="cite-ref unresolved">??${s}<div class="cite-info"><b>Unresolved citation</b><br>"${e}"</div></span>`;const{fullInfo:o,shortInfo:r}=function(e,t=2){const{author:n,year:i}=e,s=n.map((({given:e,family:t})=>e?`${e.includes(".")?e:e[0]+"."} ${t}`:t)),o=`${i} • ${s.join(", ")}`,r=s.length>t?`${i} • ${s.slice(0,t).join(", ")} +${s.length-t}`:null;return{fullInfo:o,shortInfo:r}}(t),a=function(e,t=300,n="No description is available for this article."){const{abstract:i,tldr:s}=e,o=s||i||n;return o.length>t?o.substring(0,o.substring(0,t).lastIndexOf(" "))+"... ":o}(t),u=t.venue?$`<div class="cite-head-subtitle">${t.venue}</div>`:null,l=r?$`<details class="cite-body-auth" @toggle="${this.toggleContent}"><summary data-shorttext="${r}" data-longtext="${o}">${r}</summary></details>`:$`<div class="cite-body-auth">${o}</div>`,c=t.abstract&&t.abstract!==a?$`<details class="cite-body-desc" @toggle="${this.toggleContent}"><summary data-shorttext="${a}" data-longtext="${t.abstract}">${a}</summary></details>`:$`<div class="cite-body-desc">${a}</div>`,d="inline-author"===i?function(e,t,n=2){const{author:i}=e;let s=i[0].family;2===i.length?s+=` & ${i[1].family}`:i.length>n&&(s+=" et al.");return`${s} [${t}]`}(t,n):n;return $`<span class="cite-ref" tabindex="0">${d}${s}<div class="cite-info"><a class="cite-head" href="${t.url}" target="_blank" rel="noopener noreferrer" style="color:inherit"><div class="cite-head-title">${t.title}</div>${u}</a><div class="cite-body">${l}${c}</div></div></span>`}}),window.customElements.define("cross-ref",class extends te{static get properties(){return{type:{type:String},xref:{type:String},index:{type:Number},short:{type:Boolean}}}goto(e){e.preventDefault();const t=`#${this.xref}`;history.replaceState(null,null,t),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"nearest"})}render(){const{type:e,xref:t,index:n,short:i}=this,s=`cross-ref ${e}${i?"":" full"}`;return null!=n?$`<a class="${s}" href="#${t}" @click="${this.goto}">${n}</a>`:$`<a class="${s} unresolved" title="Unresolved reference: ${t}">?</a>`}}),window.customElements.define("table-of-contents",class extends te{constructor(){super()}render(){return $`<nav role="navigation"><strong>Contents</strong> ${this.__children}</nav>`}}),window.customElements.define("tex-math",class extends De{static get dependencies(){return[{name:"katex",version:"0.15.3",module:"dist/katex.mjs",main:"dist/katex.min.js",css:"dist/katex.min.css"}]}static get properties(){return{mode:{type:String},code:{type:String},leqno:{type:Boolean},fleqn:{type:Boolean,converter:e=>"false"!==e},minRuleThickness:{type:Number},definitions:{type:Array}}}constructor(){super(),this.mode="display",this.leqno=!1,this.fleqn=!1,this.definitions=this.hasAttribute("definitions")?JSON.parse(this.getAttribute("definitions")):[]}initialChildNodes(e){!this.hasAttribute("code")&&e.length&&(this.code=e[0].textContent)}addAugmentations(){let e=this.code;for(let t=0;t<this.definitions.length;t++){const{replace:n,symbol:i,id:s}=this.definitions[t];e=e.replaceAll(n,`\\htmlClass{maug maug-${s}}{${i}}`)}return e}prepareMath(){return this.addAugmentations()}render(){const e=this.getDependency("katex");if(!e||!this.code)return;const t="display"===this.mode,n={throwOnError:!1,displayMode:t,leqno:this.leqno,fleqn:this.fleqn,minRuleThickness:this.minRuleThickness,trust:({command:e})=>"\\htmlClass"===e,strict:e=>"htmlExtension"===e?"ignore":"warn"},i=document.createElement(t?"div":"span"),s=this.prepareMath();return e.render(s,i,n),setTimeout((()=>{const n=i.querySelectorAll(".enclosing");for(const i of n){const n=[...i.classList].find((e=>e.startsWith("maug-"))).slice("maug-".length);let{symbol:s,definition:o}=this.definitions.find((e=>e.id===n));s=s.replaceAll("@",""),o=o.replaceAll("@","");const r=document.createElement("span");r.className="math-aug-window",r.style.borderBottomColor="black",e.render(`${s}:\\text{${o}}`,r,{throwOnError:!1,displayMode:!1,leqno:this.leqno,fleqn:this.fleqn,minRuleThickness:this.minRuleThickness}),i.addEventListener("focusout",(()=>{r.style.display="none"})),i.addEventListener("keydown",(e=>{"Enter"==e.key?(r.style.display="inline-block",e.stopImmediatePropagation()):"Escape"==e.key&&(r.style.display="none")})),i.appendChild(r),r.appendChild(xe(i,r,t)),r.style.display="none",i.addEventListener("click",(e=>{r.style.display="inline-block",e.stopImmediatePropagation()})),i.setAttribute("tabindex",0)}}),200),i}}),window.customElements.define("annotation-thread",class extends te{constructor(){super(),document.addEventListener("mouseup",this.mouseUp.bind(this)),ss().then((e=>{console.table(e);for(const t of e){const e=rs(t.fragment),n=e?as(e):"Unknown";e&&this.highlightRange(e,null,t.fragment),us({parent:this.querySelector(".anno-threads"),link:t.link,username:t.name,threadText:n,threadDate:new Date(t.time),threadComment:t.text})}})),setTimeout((()=>{this.openTab()}),1e3)}mouseUp(){const e=window.getSelection();if(!e.toString())return;const t=this.createOnlyTooltip(e.getRangeAt(0));document.addEventListener("selectionchange",(()=>{t.style.display="none"})),t.querySelector(".tooltip-tweet").addEventListener("mousedown",(()=>{this.highlight(e,t,!0)})),t.querySelector(".tooltip-highlight").addEventListener("mousedown",(()=>{this.highlight(e,t)})),t.querySelector(".tooltip-highlight").removeEventListener("mousedown",(()=>{this.highlight(e,t)})),t.querySelector(".tooltip-tweet").removeEventListener("mousedown",(()=>{this.highlight(e,t,!0)}))}createOnlyTooltip(e){const t=e.getBoundingClientRect(),n=document.body.querySelector("article"),i=t.x+t.width/2+window.scrollX-30,s=t.y-40+window.scrollY,o=document.createElement("div");o.classList.add("anno-tooltip"),o.style.top=`${s}px`,o.style.left=`${i}px`;let r=$`<div class="tooltip-tweet"><div class="icon-tweet"></div></div><div class="tooltip-highlight"><div class="icon-highlight"></div></div>`;return n.insertBefore(o,n.firstChild),Z(r,o),o}highlight(e,t,n=!1){let i=e.getRangeAt(0);const s=this.highlightRange(i,t,e,n);e.removeAllRanges(),function({parent:e,username:t,threadText:n,threadDate:i,threadComment:s=null}){const o=document.createElement("div");o.classList.add("thread"),o.classList.add("type-highlight");let r=$`<div class="thread-info"><div class="thread-username">${t}</div><div class="thread-type">Highlight</div></div><div class="thread-body"><div class="thread-text">${n}</div><div class="thread-comment">${s}</div></div><div class="thread-datetime">${i.toLocaleString()}</div>`;e.insertBefore(o,e.firstChild),Z(r,o)}({parent:this.querySelector(".anno-threads"),username:"You",threadText:s,threadDate:new Date,threadComment:""})}highlightRange(e,t,n,i=!1){console.log(e,n);let s=as(e);const o=function(e,t,n){e=`"${e}"`;let i=`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`;try{if("string"==typeof t)n+="#:~:text="+t;else{const e=((e,t=Date.now())=>{try{return gi(e,t)}catch(e){return console.error("Fragment generation error",e),e.isTimeout?{status:fi}:{status:pi}}})(t);if(0===e.status){const t=e.fragment,i=t.prefix?`${encodeURIComponent(t.prefix)}-,`:"",s=t.suffix?`,-${encodeURIComponent(t.suffix)}`:"",o=encodeURIComponent(t.textStart);n+="#:~:text="+i+o+(t.textEnd?`,${encodeURIComponent(t.textEnd)}`:"")+s}}i+=`&url=${encodeURIComponent(n)}`}catch(e){console.error("Error generating fragment",e)}return i}(s,n,window.location.href);let r=((e,t=document)=>{if(e.startContainer.nodeType!=Node.TEXT_NODE||e.endContainer.nodeType!=Node.TEXT_NODE)return[];if(e.startContainer===e.endContainer){const n=t.createElement("mark");return n.setAttribute("class","annotation-highlight"),e.surroundContents(n),[n]}const n=e.startContainer,i=e.cloneRange();i.setEndAfter(n);const s=e.endContainer,o=e.cloneRange();o.setStartBefore(s);const r=[];e.setStartAfter(n),e.setEndBefore(s);const a=e=>!e.parentNode||a(e.parentNode)&&!("CITE-REF"===e.nodeName||"CROSS-REF"===e.nodeName||e.className&&e.classList.contains("enclosing")),u=t.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(t){return e.intersectsNode(t)&&a(t)?Ii.includes(t.tagName)||t.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT}});let l=u.nextNode();for(;l;){if(l.nodeType===Node.TEXT_NODE){const e=t.createElement("mark");e.setAttribute("class","annotation-highlight"),l.parentNode.insertBefore(e,l),e.appendChild(l),r.push(e)}l=u.nextNode()}const c=t.createElement("mark");c.setAttribute("class","annotation-highlight"),i.surroundContents(c);const d=t.createElement("mark");return d.setAttribute("class","annotation-highlight"),o.surroundContents(d),[c,...r,d].filter((e=>{let t=e.getBoundingClientRect();return!(0===t.height&&0===t.width)}))})(e,document);if(r.forEach((e=>{var n;(n=e).addEventListener("mouseover",(()=>{t.style.display="flex",r.forEach((e=>{e.classList.add("hovered")}))})),n.addEventListener("mouseout",(async e=>{r.forEach((e=>{e.classList.remove("hovered")})),r.includes(e.target)||(await new Promise((e=>setTimeout(e,500))),t&&(t.style.display="none"))})),n.addEventListener("mousedown",a)})),t){let e=t.querySelector(".tooltip-highlight");t.querySelector(".tooltip-tweet").addEventListener("mousedown",(()=>{a()})),e&&(e.className="tooltip-remove",e.textContent="X",e.addEventListener("mousedown",(()=>{null.remove?.(),t.remove(),((e,t=document)=>{for(const n of e){const e=t.createRange();e.selectNodeContents(n);const i=e.extractContents(),s=n.parentNode;s.insertBefore(i,n),s.removeChild(n)}})(r)})))}function a(){const e=(new Date).getTime();e-os>200&&(os=e,window.open(o,"_blank"))}return i&&a(),s}openTab(){let e=this.querySelector(".anno");e.open?(e.open=!1,e.style.transform="translate(0, 0)"):(e.open=!0,e.style.transform="translate(-420px, 0)")}openColor(){let e=this.querySelector(".anno-color"),t=this.querySelector(".anno-button"),n=this.querySelector(".anno-color-button"),i=this.querySelector(".anno-side-tray");e.open?(e.open=!1,i.style.width="30px",t.style.transform="translate(0, 0)",n.style.transform="translate(0, 0)",i.style.height="300px",n.textContent="+"):(e.open=!0,t.style.transform="translate(0, 118px)",n.style.transform="translate(0, 118px)",i.style.height="430px",i.style.width="180px",n.textContent="-")}firstUpdated(){this.colorPicker=new is({container:this.querySelector(".anno-color"),theme:"light"}),this.colorPicker.on("change",(e=>{document.querySelector("article").style.setProperty("--highlight-color",`hsla(${e.h},${e.s}%,${e.v}%, ${e.a})`),this.requestUpdate()})),this.requestUpdate()}render(){return $`<div class="anno"><div class="anno-tray"><div class="top-nav"><div class="title"><h2 style="margin:0">Discussions<h3></h3></h2></div></div><div class="anno-threads"></div></div><div class="anno-side-tray"><div class="anno-color"></div><div class="anno-color-button" @click="${this.openColor}">+</div><div class="anno-button" @click="${this.openTab}"><p style="transform:rotate(90deg) translate(-5px,-2px);margin:0">tweets</p></div></div></div>`}}),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("article");!function(e,t){e.querySelectorAll("cite-ref").forEach((e=>{null!=e.index&&(e.data=t[e.index-1])}))}(e,[{id:"doi:10.1145/142750.142751",doi:"10.1145/142750.142751",s2id:"d3d61d8dd03347986484c3fdc8b3b0e3550049c5",year:1992,author:[{given:"William C.",family:"Hill",sequence:"first",affiliation:[]},{given:"James D.",family:"Hollan",sequence:"additional",affiliation:[]},{given:"Dave",family:"Wroblewski",sequence:"additional",affiliation:[]},{given:"Tim",family:"McCandless",sequence:"additional",affiliation:[]}],title:"Edit wear and read wear: ",venue:"Proceedings of the SIGCHI conference on Human factors in computing systems  - CHI '92",url:"https://www.semanticscholar.org/paper/d3d61d8dd03347986484c3fdc8b3b0e3550049c5",abstract:"We describe two applications that illustrate the idea of computational wear in the domain of document processing. By graphically depicting the history of author and reader interactions with documents, these applications offer otherwise unavailable information to guide work. We discuss how their design accords with a theory of professional work and an informational physics perspective on interface design.",tldr:"Two applications are described that illustrate the idea of computational wear in the domain of document processing by graphically depicting the history of author and reader interactions with documents by offering otherwise unavailable information to guide work."},{id:"doi:10.3389/fncom.2012.00001",doi:"10.3389/fncom.2012.00001",s2id:"faf3448af84298eff8c5a55b8c6f5319e2e26f7d",year:2011,author:[{given:"Christopher",family:"Lee",sequence:"first",affiliation:[]}],title:"Open Peer Review by a Selected-Papers Network: ",venue:"Frontiers in Computational Neuroscience",url:"https://www.semanticscholar.org/paper/faf3448af84298eff8c5a55b8c6f5319e2e26f7d",abstract:"A selected-papers (SP) network is a network in which researchers who read, write, and review articles subscribe to each other based on common interests. Instead of reviewing a manuscript in secret for the Editor of a journal, each reviewer simply publishes his review (typically of a paper he wishes to recommend) to his SP network subscribers. Once the SP network reviewers complete their review decisions, the authors can invite any journal editor they want to consider these reviews and initial audience size, and make a publication decision. Since all impact assessment, reviews, and revisions are complete, this decision process should be short. I show how the SP network can provide a new way of measuring impact, catalyze the emergence of new subfields, and accelerate discovery in existing fields, by providing each reader a fine-grained filter for high-impact. I present a three phase plan for building a basic SP network, and making it an effective peer review platform that can be used by journals, conferences, users of repositories such as arXiv, and users of search engines such as PubMed. I show how the SP network can greatly improve review and dissemination of research articles in areas that are not well-supported by existing journals. Finally, I illustrate how the SP network concept can work well with existing publication services such as journals, conferences, arXiv, PubMed, and online citation management sites.",tldr:"It is shown how the SP network can provide a new way of measuring impact, catalyze the emergence of new subfields, and accelerate discovery in existing fields, by providing each reader a fine-grained filter for high-impact."},{id:"doi:10.1038/469286a",doi:"10.1038/469286a",s2id:"3dea4375310fe93f29d0f76dd9e602b459b523cd",year:2011,author:[{given:"Apoorva",family:"Mandavilli",sequence:"first",affiliation:[]}],title:"Peer review: Trial by Twitter: ",venue:"Nature",url:"https://www.semanticscholar.org/paper/3dea4375310fe93f29d0f76dd9e602b459b523cd",tldr:"Blogs and tweets are ripping papers apart within days of publication, leaving researchers unsure how to react."},{id:"doi:10.1038/512126a",doi:"10.1038/512126a",s2id:"5cdb88c5e6afef17ae102c530d97a73089e5497e",year:2014,author:[{given:"Richard",family:"Van Noorden",sequence:"first",affiliation:[]}],title:"Online collaboration: Scientists and the social network: ",venue:"Nature",url:"https://www.semanticscholar.org/paper/5cdb88c5e6afef17ae102c530d97a73089e5497e"},{id:"doi:10.1145/2207676.2208326",doi:"10.1145/2207676.2208326",s2id:"536f1c9f46c147209d3dbd3e2579060e3a7f80d2",year:2012,author:[{given:"Sacha",family:"Zyto",sequence:"first",affiliation:[{name:"Massachusetts Institute of Technology, Cambridge, Massachusetts, United States"}]},{given:"David",family:"Karger",sequence:"additional",affiliation:[{name:"Massachusetts Institute of Technology, Cambridge, Massachusetts, United States"}]},{given:"Mark",family:"Ackerman",sequence:"additional",affiliation:[{name:"University of Michigan, Ann Arbor, Michigan, United States"}]},{given:"Sanjoy",family:"Mahajan",sequence:"additional",affiliation:[{name:"Olin College of Engineering, Needham, Massachusetts, United States"}]}],title:"Successful classroom deployment of a social document annotation system: ",venue:"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems",url:"https://www.semanticscholar.org/paper/536f1c9f46c147209d3dbd3e2579060e3a7f80d2",abstract:"NB is an in-place collaborative document annotation website targeting students reading lecture notes and draft textbooks. Serving as a discussion forum in the document margins, NB lets users ask and answer questions about their reading material as they are reading. NB users can read and annotate documents using their web browsers, without any special plug-ins. We describe the NB system and its evaluation in real class environment, where students used it to submit their reading assignments, ask questions and get or provide feedback. We show that this tool can be and has been successfully incorporated into a number of different classes at different institutions. To understand how and why, we focus on a particularly successful class deployment where the instructor adapted his teaching style to take students' comment into account. We analyze the annotation practices that were observed - including the way geographic locality was exploited in ways unavailable in traditional forums - and discuss general design implications for online annotation tools in academia.",tldr:"The NB system is described and its evaluation in real class environment, where students used it to submit their reading assignments, ask questions and get or provide feedback, and the annotation practices that were observed are analyzed."}]),Oe(e)}));

    </script>
</html>